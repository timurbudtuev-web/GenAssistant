<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GenAssistant 2.0</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --megafon-green: #00B956;
            --megafon-purple: #9B30FF;
            --bg-light: #F5F5F5;
            --bg-white: #FFFFFF;
            --text-dark: #1A1A1A;
            --text-gray: #666666;
            --border-gray: #E0E0E0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg-light);
            color: var(--text-dark);
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* Sidebar */
        .sidebar {
            width: 240px;
            background: var(--bg-white);
            border-right: 1px solid var(--border-gray);
            display: flex;
            flex-direction: column;
            flex-shrink: 0;
        }

        .sidebar-header {
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            border-bottom: 1px solid var(--border-gray);
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--megafon-green), var(--megafon-purple));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2em;
        }

        .logo-text {
            font-size: 1.1em;
            font-weight: 600;
            color: var(--text-dark);
        }

        .sidebar-nav {
            flex: 1;
            overflow-y: auto;
            padding: 8px 0;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--text-gray);
            font-size: 0.95em;
            text-decoration: none;
        }

        .nav-item:hover {
            background: var(--bg-light);
            color: var(--text-dark);
        }

        .nav-item.active {
            background: var(--bg-light);
            color: var(--megafon-green);
            font-weight: 500;
            border-left: 3px solid var(--megafon-green);
            padding-left: 17px;
        }

        .nav-icon {
            font-size: 1.1em;
            width: 20px;
            text-align: center;
        }

        .nav-divider {
            height: 1px;
            background: var(--border-gray);
            margin: 8px 0;
        }

        .nav-section-title {
            padding: 12px 20px 8px;
            font-size: 0.75em;
            text-transform: uppercase;
            color: #999;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .sidebar-footer {
            padding: 15px 20px;
            border-top: 1px solid var(--border-gray);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--megafon-purple);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.9em;
        }

        .user-name {
            font-size: 0.9em;
            color: var(--text-dark);
        }

        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .top-bar {
            background: var(--bg-white);
            padding: 16px 32px;
            border-bottom: 1px solid var(--border-gray);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-gray);
            font-size: 0.9em;
        }

        .breadcrumb span {
            cursor: pointer;
        }

        .breadcrumb span:hover {
            color: var(--megafon-green);
        }

        .page-title {
            font-size: 1.5em;
            font-weight: 600;
            color: var(--text-dark);
        }

        .top-actions {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .icon-btn {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            border: 1px solid var(--border-gray);
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1.1em;
        }

        .icon-btn:hover {
            background: var(--bg-light);
            border-color: var(--megafon-green);
        }

        /* Content Area */
        .content-area {
            flex: 1;
            overflow-y: auto;
            padding: 32px;
        }

        .search-box {
            max-width: 600px;
            margin-bottom: 24px;
        }

        .search-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--border-gray);
            border-radius: 8px;
            font-size: 0.95em;
            background: white;
            transition: all 0.2s;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--megafon-green);
            box-shadow: 0 0 0 3px rgba(0, 185, 86, 0.1);
        }

        .section-header {
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 0.85em;
            text-transform: uppercase;
            color: #999;
            font-weight: 600;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .section-count {
            font-size: 0.9em;
            color: var(--text-gray);
        }

        /* Apps Grid - More Compact */
        .apps-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 12px;
        }

        .app-card {
            background: white;
            border: 1px solid var(--border-gray);
            border-radius: 10px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            gap: 8px;
        }

        .app-card:hover {
            border-color: var(--megafon-green);
            box-shadow: 0 4px 12px rgba(0, 185, 86, 0.1);
            transform: translateY(-2px);
        }

        .app-icon {
            width: 42px;
            height: 42px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4em;
            flex-shrink: 0;
        }

        .app-icon.green {
            background: linear-gradient(135deg, var(--megafon-green), #00D966);
            color: white;
        }

        .app-icon.purple {
            background: linear-gradient(135deg, var(--megafon-purple), #B85CFF);
            color: white;
        }

        .app-icon.blue {
            background: linear-gradient(135deg, #00A8E8, #007EA7);
            color: white;
        }

        .app-icon.orange {
            background: linear-gradient(135deg, #FF6B35, #F7931E);
            color: white;
        }

        .app-icon.gradient {
            background: linear-gradient(135deg, var(--megafon-green), var(--megafon-purple));
            color: white;
        }

        .app-name {
            font-size: 0.9em;
            font-weight: 500;
            color: var(--text-dark);
            line-height: 1.3;
        }

        .app-badge {
            font-size: 0.7em;
            background: var(--bg-light);
            color: var(--text-gray);
            padding: 3px 8px;
            border-radius: 10px;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            border: 1px solid var(--border-gray);
            border-left: 3px solid var(--megafon-green);
            padding: 16px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            opacity: 0;
            transform: translateX(400px);
            transition: all 0.3s;
            z-index: 1000;
            max-width: 320px;
        }

        .notification.show {
            opacity: 1;
            transform: translateX(0);
        }

        /* Responsive */
        @media (max-width: 968px) {
            .sidebar {
                width: 200px;
            }

            .apps-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                left: -240px;
                z-index: 1000;
                transition: left 0.3s;
            }

            .sidebar.open {
                left: 0;
            }

            .content-area {
                padding: 20px;
            }
        }

        /* Self-Service AI Styles */
        .wizard-container {
            background: white;
            border: 1px solid var(--border-gray);
            border-radius: 12px;
            padding: 40px;
            max-width: 1000px;
            margin: 0 auto;
        }

        .wizard-steps {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 50px;
        }

        .step-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }

        .step-circle {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--bg-light);
            border: 2px solid var(--border-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: var(--text-gray);
            transition: all 0.3s;
        }

        .step-item.active .step-circle {
            background: var(--megafon-green);
            border-color: var(--megafon-green);
            color: white;
        }

        .step-item.completed .step-circle {
            background: var(--megafon-green);
            border-color: var(--megafon-green);
            color: white;
        }

        .step-label {
            margin-top: 10px;
            font-size: 0.85em;
            color: var(--text-gray);
            font-weight: 500;
        }

        .step-item.active .step-label {
            color: var(--megafon-green);
            font-weight: 600;
        }

        .step-line {
            width: 80px;
            height: 2px;
            background: var(--border-gray);
            margin: 0 10px;
            margin-bottom: 25px;
        }

        .step-item.completed + .step-line {
            background: var(--megafon-green);
        }

        .wizard-content {
            min-height: 400px;
            margin-bottom: 30px;
        }

        .wizard-step {
            display: none;
        }

        .wizard-step.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .step-content {
            text-align: center;
        }

        .step-title {
            font-size: 1.8em;
            color: var(--text-dark);
            margin-bottom: 10px;
        }

        .step-description {
            font-size: 1em;
            color: var(--text-gray);
            margin-bottom: 30px;
        }

        /* Avatar Selection */
        .avatar-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(70px, 1fr));
            gap: 15px;
            max-width: 700px;
            margin: 30px auto;
        }

        .avatar-option {
            width: 70px;
            height: 70px;
            border: 2px solid var(--border-gray);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            cursor: pointer;
            transition: all 0.2s;
            background: white;
        }

        .avatar-option:hover {
            border-color: var(--megafon-green);
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(0, 185, 86, 0.2);
        }

        .avatar-option.selected {
            border-color: var(--megafon-green);
            background: var(--megafon-light-green);
            border-width: 3px;
        }

        .avatar-preview {
            margin-top: 40px;
        }

        .preview-label {
            font-size: 0.9em;
            color: var(--text-gray);
            margin-bottom: 15px;
        }

        .preview-card {
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            padding: 30px;
            background: var(--bg-light);
            border: 2px solid var(--border-gray);
            border-radius: 16px;
        }

        .preview-icon {
            width: 80px;
            height: 80px;
            border-radius: 16px;
            background: linear-gradient(135deg, var(--megafon-green), var(--megafon-purple));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5em;
            color: white;
        }

        .preview-name {
            font-size: 1.1em;
            font-weight: 600;
            color: var(--text-dark);
        }

        /* Prompt Templates */
        .prompt-templates {
            max-width: 800px;
            margin: 20px auto;
            text-align: left;
        }

        .template-label {
            font-size: 0.9em;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 10px;
        }

        .template-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .template-btn {
            padding: 8px 16px;
            border: 1px solid var(--border-gray);
            background: white;
            border-radius: 8px;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.2s;
        }

        .template-btn:hover {
            border-color: var(--megafon-green);
            background: var(--megafon-light-green);
        }

        .prompt-hint {
            margin-top: 10px;
            font-size: 0.85em;
            color: var(--megafon-green);
            text-align: left;
        }

        /* File Upload */
        .upload-area {
            max-width: 600px;
            margin: 30px auto;
            padding: 60px 40px;
            border: 2px dashed var(--border-gray);
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .upload-area:hover {
            border-color: var(--megafon-green);
            background: var(--megafon-light-green);
        }

        .upload-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .upload-text {
            font-size: 1.1em;
            color: var(--text-dark);
            margin-bottom: 10px;
        }

        .upload-hint {
            font-size: 0.85em;
            color: var(--text-gray);
        }

        .files-list {
            max-width: 600px;
            margin: 20px auto;
        }

        .file-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--bg-light);
            border: 1px solid var(--border-gray);
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .file-icon {
            font-size: 1.5em;
        }

        .file-info {
            flex: 1;
        }

        .file-name {
            font-size: 0.9em;
            font-weight: 500;
            color: var(--text-dark);
        }

        .file-size {
            font-size: 0.8em;
            color: var(--text-gray);
        }

        .file-remove {
            width: 28px;
            height: 28px;
            border-radius: 6px;
            border: 1px solid var(--border-gray);
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .file-remove:hover {
            border-color: #ff6b6b;
            color: #ff6b6b;
        }

        .skip-hint {
            margin-top: 30px;
            padding: 15px;
            background: #FFF9E6;
            border-radius: 8px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .skip-hint p {
            margin: 0;
            font-size: 0.9em;
            color: #856404;
        }

        /* Publication Options */
        .publication-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            max-width: 900px;
            margin: 30px auto;
        }

        .pub-option {
            padding: 25px;
            border: 2px solid var(--border-gray);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            text-align: center;
        }

        .pub-option:hover {
            border-color: var(--megafon-green);
            box-shadow: 0 4px 12px rgba(0, 185, 86, 0.1);
        }

        .pub-option.selected {
            border-color: var(--megafon-green);
            background: var(--megafon-light-green);
            border-width: 3px;
        }

        .pub-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
        }

        .pub-title {
            font-size: 1.1em;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 8px;
        }

        .pub-description {
            font-size: 0.85em;
            color: var(--text-gray);
            line-height: 1.4;
        }

        .pub-radio {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 20px;
            height: 20px;
            border: 2px solid var(--border-gray);
            border-radius: 50%;
            transition: all 0.2s;
        }

        .pub-option.selected .pub-radio {
            border-color: var(--megafon-green);
            background: var(--megafon-green);
        }

        .pub-option.selected .pub-radio::after {
            content: 'âœ“';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 0.8em;
            font-weight: bold;
        }

        .team-selection {
            max-width: 500px;
            margin: 30px auto;
        }

        /* Summary Box */
        .summary-box {
            max-width: 600px;
            margin: 40px auto;
            padding: 25px;
            background: var(--bg-light);
            border: 1px solid var(--border-gray);
            border-radius: 12px;
            text-align: left;
        }

        .summary-title {
            font-size: 1.1em;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 20px;
        }

        .summary-item {
            display: flex;
            gap: 15px;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-gray);
        }

        .summary-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .summary-label {
            font-size: 0.9em;
            font-weight: 600;
            color: var(--text-gray);
            min-width: 100px;
        }

        .summary-value {
            flex: 1;
            font-size: 0.9em;
            color: var(--text-dark);
        }

        /* Wizard Navigation */
        .wizard-navigation {
            display: flex;
            gap: 15px;
            padding-top: 30px;
            border-top: 1px solid var(--border-gray);
        }

        .btn-secondary {
            background: white;
            color: var(--text-dark);
            border: 1px solid var(--border-gray);
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 0.95em;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-secondary:hover {
            background: var(--bg-light);
            border-color: var(--text-dark);
        }

        .my-apps-section {
            padding-top: 40px;
            border-top: 2px solid var(--border-gray);
        }

        /* Chat Modal */
        .chat-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .chat-modal.active {
            display: flex;
        }

        .chat-container {
            width: 90%;
            max-width: 900px;
            height: 80vh;
            background: white;
            border-radius: 16px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .chat-header {
            padding: 20px 24px;
            border-bottom: 1px solid var(--border-gray);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .chat-app-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .chat-app-avatar {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--megafon-green), var(--megafon-purple));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8em;
            color: white;
        }

        .chat-app-name {
            font-size: 1.1em;
            font-weight: 600;
            color: var(--text-dark);
        }

        .chat-app-status {
            font-size: 0.85em;
            color: var(--megafon-green);
        }

        .close-chat-btn {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            border: 1px solid var(--border-gray);
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1.2em;
        }

        .close-chat-btn:hover {
            background: var(--bg-light);
            border-color: var(--text-dark);
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 24px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .welcome-message {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-gray);
        }

        .welcome-icon {
            font-size: 4em;
            margin-bottom: 20px;
        }

        .welcome-message h3 {
            font-size: 1.5em;
            color: var(--text-dark);
            margin-bottom: 10px;
        }

        .welcome-message p {
            font-size: 1em;
        }

        .message {
            display: flex;
            gap: 12px;
            max-width: 80%;
            animation: messageSlideIn 0.3s;
        }

        @keyframes messageSlideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            align-self: flex-end;
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
            flex-shrink: 0;
        }

        .message.user .message-avatar {
            background: var(--megafon-purple);
            color: white;
        }

        .message.assistant .message-avatar {
            background: var(--megafon-light-green);
        }

        .message-content {
            background: var(--bg-light);
            padding: 12px 16px;
            border-radius: 12px;
            line-height: 1.5;
        }

        .message.user .message-content {
            background: var(--megafon-green);
            color: white;
        }

        .message.assistant .message-content {
            background: var(--bg-light);
            color: var(--text-dark);
        }

        .message-content p {
            margin: 0 0 8px 0;
        }

        .message-content p:last-child {
            margin-bottom: 0;
        }

        .thinking-indicator {
            display: flex;
            gap: 4px;
            padding: 12px 16px;
            background: var(--bg-light);
            border-radius: 12px;
            width: fit-content;
        }

        .thinking-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--text-gray);
            animation: thinkingDot 1.4s infinite;
        }

        .thinking-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .thinking-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes thinkingDot {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-10px);
            }
        }

        .chat-input-area {
            padding: 20px 24px;
            border-top: 1px solid var(--border-gray);
            display: flex;
            gap: 12px;
            align-items: flex-end;
        }

        .chat-input {
            flex: 1;
            padding: 12px 16px;
            border: 1px solid var(--border-gray);
            border-radius: 10px;
            font-size: 0.95em;
            resize: none;
            max-height: 120px;
            font-family: inherit;
        }

        .chat-input:focus {
            outline: none;
            border-color: var(--megafon-green);
        }

        .send-btn {
            width: 44px;
            height: 44px;
            border-radius: 10px;
            border: none;
            background: var(--megafon-green);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            flex-shrink: 0;
        }

        .send-btn:hover {
            background: #00D966;
            transform: scale(1.05);
        }

        .send-btn:disabled {
            background: var(--border-gray);
            cursor: not-allowed;
            transform: scale(1);
        }

        .send-icon {
            font-size: 1.2em;
        }

        .builder-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-top: 24px;
        }

        .builder-panel {
            background: white;
            border: 1px solid var(--border-gray);
            border-radius: 12px;
            padding: 24px;
        }

        .panel-title {
            font-size: 1.1em;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 18px;
        }

        .form-label {
            display: block;
            font-size: 0.9em;
            font-weight: 500;
            color: var(--text-dark);
            margin-bottom: 8px;
        }

        .form-input,
        .form-textarea,
        .form-select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--border-gray);
            border-radius: 8px;
            font-size: 0.9em;
            background: white;
            transition: all 0.2s;
        }

        .form-input:focus,
        .form-textarea:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--megafon-green);
            box-shadow: 0 0 0 3px rgba(0, 185, 86, 0.1);
        }

        .form-textarea {
            min-height: 120px;
            resize: vertical;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
        }

        .btn-primary {
            background: var(--megafon-green);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 0.95em;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            width: 100%;
        }

        .btn-primary:hover {
            background: #00D966;
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0, 185, 86, 0.2);
        }

        .agent-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .agent-item {
            background: var(--bg-light);
            border: 1px solid var(--border-gray);
            border-radius: 8px;
            padding: 14px;
            transition: all 0.2s;
        }

        .agent-item:hover {
            border-color: var(--megafon-green);
            background: white;
        }

        .agent-title {
            font-size: 0.95em;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 6px;
        }

        .agent-description {
            font-size: 0.85em;
            color: var(--text-gray);
            line-height: 1.4;
            margin-bottom: 8px;
        }

        .agent-meta {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .badge {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.75em;
            font-weight: 500;
            background: var(--bg-light);
            color: var(--text-gray);
        }

        /* Skills styles removed */

        /* Cowork Styles */
        .cowork-header-banner {
            background: linear-gradient(135deg, var(--megafon-green), var(--megafon-purple));
            padding: 30px 40px;
            border-radius: 16px;
            margin-bottom: 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
        }

        .banner-content h1 {
            color: white;
        }

        .banner-stats {
            display: flex;
            gap: 30px;
        }

        .stat-item {
            text-align: center;
            background: rgba(255, 255, 255, 0.2);
            padding: 15px 25px;
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }

        .stat-number {
            font-size: 2em;
            font-weight: 700;
            color: white;
        }

        .stat-label {
            font-size: 0.85em;
            color: white;
            opacity: 0.9;
            margin-top: 5px;
        }

        .cowork-main {
            display: flex;
            flex-direction: column;
            gap: 0;
            height: calc(100vh - 350px);
        }

        /* Cowork Tabs */
        .cowork-tabs {
            display: flex;
            gap: 8px;
            padding: 0 0 16px 0;
            border-bottom: 2px solid var(--border-gray);
        }

        .cowork-tab {
            padding: 14px 24px;
            border: none;
            background: white;
            border-radius: 10px 10px 0 0;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1em;
            font-weight: 500;
            color: var(--text-gray);
            position: relative;
        }

        .cowork-tab:hover {
            background: var(--bg-light);
            color: var(--text-dark);
        }

        .cowork-tab.active {
            background: white;
            color: var(--megafon-green);
            font-weight: 600;
            border-bottom: 3px solid var(--megafon-green);
        }

        .tab-icon {
            font-size: 1.2em;
        }

        .tab-badge {
            background: var(--megafon-green);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75em;
            font-weight: 600;
            margin-left: 4px;
        }

        .cowork-tab-content {
            flex: 1;
            overflow: hidden;
        }

        .cowork-tab-panel {
            display: none;
            height: 100%;
        }

        .cowork-tab-panel.active {
            display: block;
        }

        /* Files Tab */
        .files-panel-full {
            height: 100%;
            background: white;
            border: 1px solid var(--border-gray);
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .panel-header-large {
            padding: 24px 30px;
            border-bottom: 1px solid var(--border-gray);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .panel-header-large h3 {
            margin: 0;
            font-size: 1.5em;
            color: var(--text-dark);
        }

        .file-browser-large {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
        }

        .empty-state-large {
            text-align: center;
            padding: 80px 40px;
            color: var(--text-gray);
        }

        .empty-icon {
            font-size: 5em;
            margin-bottom: 20px;
            opacity: 0.3;
        }

        .empty-state-large h3 {
            font-size: 1.5em;
            color: var(--text-dark);
            margin-bottom: 10px;
        }

        .empty-state-large p {
            font-size: 1em;
            margin-bottom: 20px;
        }

        .file-item-large {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 20px;
            background: var(--bg-light);
            border: 2px solid var(--border-gray);
            border-radius: 12px;
            margin-bottom: 16px;
            transition: all 0.2s;
            cursor: pointer;
        }

        .file-item-large:hover {
            border-color: var(--megafon-green);
            background: white;
            box-shadow: 0 4px 12px rgba(0, 185, 86, 0.1);
        }

        .file-icon-large {
            font-size: 3em;
        }

        .file-info-large {
            flex: 1;
        }

        .file-name-large {
            font-size: 1.1em;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 6px;
        }

        .file-size-large {
            font-size: 0.9em;
            color: var(--text-gray);
        }

        .file-actions {
            display: flex;
            gap: 8px;
        }

        .file-action-btn {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            border: 1px solid var(--border-gray);
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .file-action-btn:hover {
            background: var(--bg-light);
            border-color: var(--megafon-green);
        }

        /* Logs Tab */
        .logs-panel-full {
            height: 100%;
            background: white;
            border: 1px solid var(--border-gray);
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .execution-log-large {
            flex: 1;
            overflow-y: auto;
            padding: 20px 30px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            background: #1e1e1e;
            color: #00ff00;
        }

        .cowork-chat-container {
            background: white;
            border: 1px solid var(--border-gray);
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .cowork-chat-header {
            padding: 20px 24px;
            border-bottom: 1px solid var(--border-gray);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .cowork-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .cowork-avatar {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--megafon-green), var(--megafon-purple));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8em;
            color: white;
        }

        .cowork-name {
            font-size: 1.1em;
            font-weight: 600;
            color: var(--text-dark);
        }

        .cowork-status {
            font-size: 0.85em;
            color: var(--megafon-green);
        }

        .cowork-actions {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            border: 1px solid var(--border-gray);
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1.1em;
        }

        .action-btn:hover {
            background: var(--bg-light);
            border-color: var(--megafon-green);
        }

        .cowork-messages {
            flex: 1;
            overflow-y: auto;
            padding: 24px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .cowork-capabilities {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 20px;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }

        .capability-item {
            background: var(--bg-light);
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 0.9em;
            text-align: center;
            border: 1px solid var(--border-gray);
        }

        .cowork-input-area {
            padding: 20px 24px;
            border-top: 1px solid var(--border-gray);
            display: flex;
            gap: 12px;
            flex-direction: column;
            background: linear-gradient(to bottom, white, #f8f9fa);
        }

        .input-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .cowork-tools {
            display: flex;
            gap: 8px;
        }

        .tool-btn {
            padding: 10px 18px;
            border: 2px solid var(--border-gray);
            background: white;
            border-radius: 8px;
            font-size: 0.9em;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .tool-btn:hover {
            background: var(--megafon-light-green);
            border-color: var(--megafon-green);
            transform: translateY(-1px);
        }

        .tool-btn.highlighted {
            border-color: var(--megafon-green);
            background: var(--megafon-light-green);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                box-shadow: 0 0 0 0 rgba(0, 185, 86, 0.4);
            }
            50% {
                box-shadow: 0 0 0 8px rgba(0, 185, 86, 0);
            }
        }

        .cowork-input {
            flex: 1;
            padding: 14px 18px;
            border: 2px solid var(--border-gray);
            border-radius: 10px;
            font-size: 1em;
            resize: none;
            max-height: 150px;
            font-family: inherit;
            transition: all 0.2s;
        }

        .cowork-input:focus {
            outline: none;
            border-color: var(--megafon-green);
            box-shadow: 0 0 0 3px rgba(0, 185, 86, 0.1);
        }

        .cowork-send-btn {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            border: none;
            background: linear-gradient(135deg, var(--megafon-green), #00D966);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            flex-shrink: 0;
            align-self: flex-end;
            box-shadow: 0 4px 12px rgba(0, 185, 86, 0.3);
        }

        .cowork-send-btn:hover {
            background: linear-gradient(135deg, #00D966, var(--megafon-green));
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 185, 86, 0.4);
        }

        .send-icon {
            font-size: 1.3em;
        }

        /* Skills Panel */
        /* Skills panel styles removed */

        /* Sidebar */
        .cowork-sidebar {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .sidebar-panel {
            background: white;
            border: 1px solid var(--border-gray);
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .sidebar-panel:first-child {
            flex: 1;
        }

        .sidebar-panel:last-child {
            height: 300px;
        }

        .panel-header {
            padding: 15px 20px;
            border-bottom: 1px solid var(--border-gray);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .panel-header h4 {
            margin: 0;
            font-size: 0.95em;
            color: var(--text-dark);
        }

        .clear-log-btn {
            padding: 4px 12px;
            font-size: 0.8em;
            border: 1px solid var(--border-gray);
            background: white;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .clear-log-btn:hover {
            background: var(--bg-light);
        }

        .file-browser {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-gray);
        }

        .file-item-browser {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .file-item-browser:hover {
            background: var(--bg-light);
        }

        .file-icon-browser {
            font-size: 1.5em;
        }

        .file-info-browser {
            flex: 1;
        }

        .file-name-browser {
            font-size: 0.9em;
            font-weight: 500;
            color: var(--text-dark);
        }

        .file-size-browser {
            font-size: 0.75em;
            color: var(--text-gray);
        }

        .execution-log {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
        }

        .log-entry {
            display: flex;
            gap: 10px;
            margin-bottom: 8px;
            padding: 6px 0;
        }

        .log-time {
            color: var(--text-gray);
            font-size: 0.9em;
        }

        .log-message {
            flex: 1;
        }

        .log-entry.info .log-message {
            color: var(--megafon-green);
        }

        .log-entry.warning .log-message {
            color: #FFB020;
        }

        .log-entry.error .log-message {
            color: #ff6b6b;
        }

        .log-entry.success .log-message {
            color: var(--megafon-green);
        }

        .cowork-layout {
            display: grid;
            grid-template-columns: 1fr 1.2fr;
            gap: 24px;
            margin-top: 24px;
        }

        .scenarios-panel {
            background: white;
            border: 1px solid var(--border-gray);
            border-radius: 12px;
            padding: 24px;
        }

        .scenario-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .scenario-item {
            background: var(--bg-light);
            border: 1px solid var(--border-gray);
            border-left: 3px solid var(--megafon-purple);
            border-radius: 8px;
            padding: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .scenario-item:hover {
            background: white;
            border-color: var(--megafon-purple);
            box-shadow: 0 2px 8px rgba(155, 48, 255, 0.1);
        }

        .scenario-title {
            font-size: 0.95em;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 6px;
        }

        .scenario-description {
            font-size: 0.85em;
            color: var(--text-gray);
            line-height: 1.4;
            margin-bottom: 10px;
        }

        .scenario-badges {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
            margin-bottom: 8px;
        }

        .scenario-status {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.75em;
            font-weight: 500;
        }

        .scenario-status.active {
            background: #E6F9F0;
            color: var(--megafon-green);
        }

        .scenario-status.draft {
            background: #FFF3CD;
            color: #856404;
        }

        .terminal-panel {
            background: white;
            border: 1px solid var(--border-gray);
            border-radius: 12px;
            padding: 24px;
        }

        .terminal {
            background: #1e1e1e;
            color: var(--megafon-green);
            border-radius: 8px;
            padding: 20px;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
            height: 500px;
            overflow-y: auto;
            line-height: 1.5;
        }

        .terminal-line {
            margin-bottom: 6px;
        }

        .terminal-line.command {
            color: var(--megafon-purple);
            font-weight: 600;
        }

        .terminal-line.success {
            color: var(--megafon-green);
        }

        .terminal-line.error {
            color: #ff6b6b;
        }

        .terminal-line.info {
            color: #FFD700;
        }

        @media (max-width: 968px) {
            .builder-layout,
            .cowork-layout {
                grid-template-columns: 1fr;
            }
        }
        /* Cowork Chat Styles */
        .cowork-simple-layout {
            max-width: 860px;
            margin: 0 auto;
            height: calc(100vh - 140px);
            padding: 0 20px;
        }

        .cowork-chat-simple {
            background: var(--bg-white);
            border: 1px solid var(--border-gray);
            border-radius: 16px;
            height: 100%;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0,0,0,0.04);
        }

        .cowork-messages-simple {
            flex: 1;
            overflow-y: auto;
            padding: 32px 28px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .cowork-messages-simple::-webkit-scrollbar {
            width: 6px;
        }
        .cowork-messages-simple::-webkit-scrollbar-track {
            background: transparent;
        }
        .cowork-messages-simple::-webkit-scrollbar-thumb {
            background: #d1d5db;
            border-radius: 3px;
        }

        .welcome-msg {
            text-align: center;
            padding: 80px 20px 40px;
            color: var(--text-gray);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .welcome-icon-wrap {
            width: 72px;
            height: 72px;
            border-radius: 20px;
            background: linear-gradient(135deg, #E6F9F0, #E0F0FF);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--megafon-green);
            margin-bottom: 20px;
        }

        .welcome-msg h3 {
            font-size: 1.4em;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 8px;
        }

        .welcome-msg p {
            font-size: 0.95em;
            color: var(--text-gray);
            max-width: 400px;
            line-height: 1.5;
        }

        .welcome-hints {
            display: flex;
            gap: 8px;
            margin-top: 28px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .welcome-hint {
            padding: 8px 16px;
            background: var(--bg-light);
            border: 1px solid var(--border-gray);
            border-radius: 20px;
            font-size: 0.85em;
            color: var(--text-gray);
            cursor: pointer;
            transition: all 0.2s;
        }

        .welcome-hint:hover {
            border-color: var(--megafon-green);
            color: var(--megafon-green);
            background: #F0FFF7;
        }

        .attached-preview {
            padding: 8px 20px;
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            border-top: 1px solid var(--border-gray);
            background: #FAFAFA;
        }

        .cowork-input-simple {
            padding: 16px 20px;
            border-top: 1px solid var(--border-gray);
            display: flex;
            gap: 10px;
            align-items: flex-end;
            background: var(--bg-white);
        }

        .cowork-attach-btn {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            border: 1px solid var(--border-gray);
            background: var(--bg-white);
            color: var(--text-gray);
            cursor: pointer;
            transition: all 0.15s;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .cowork-attach-btn:hover {
            border-color: var(--megafon-green);
            color: var(--megafon-green);
            background: #F0FFF7;
        }

        .file-count-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--megafon-green);
            color: white;
            font-size: 0.65em;
            width: 18px;
            height: 18px;
            border-radius: 9px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        .cowork-input-simple textarea {
            flex: 1;
            padding: 10px 16px;
            border: 1px solid var(--border-gray);
            border-radius: 12px;
            font-size: 0.9em;
            resize: none;
            min-height: 40px;
            max-height: 140px;
            font-family: inherit;
            line-height: 1.5;
            background: var(--bg-light);
            transition: border-color 0.15s, background 0.15s;
        }

        .cowork-input-simple textarea:focus {
            outline: none;
            border-color: var(--megafon-green);
            background: var(--bg-white);
            box-shadow: 0 0 0 3px rgba(0, 185, 86, 0.08);
        }

        .cowork-send-btn {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            border: none;
            background: var(--megafon-green);
            color: white;
            cursor: pointer;
            transition: all 0.15s;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cowork-send-btn:hover {
            background: #00A34D;
            transform: scale(1.04);
        }

        .cowork-send-btn:active {
            transform: scale(0.97);
        }

        .file-chip {
            background: var(--bg-white);
            border: 1px solid var(--border-gray);
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-dark);
        }

        .file-chip-remove {
            cursor: pointer;
            color: var(--text-gray);
        }

        .file-chip-remove:hover {
            color: #ff6b6b;
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <div class="logo-icon">ðŸš€</div>
            <div class="logo-text">GenAssistant</div>
        </div>

        <nav class="sidebar-nav">
            <a class="nav-item active" onclick="showSection('profiles')">
                <span class="nav-icon">âœ¨</span>
                <span>AI ÐŸÑ€Ð¾Ñ„Ð¸Ð»Ð¸</span>
            </a>
            
            <div class="nav-divider"></div>
            <div class="nav-section-title">ÐŸÐ»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼Ð° 2.0</div>
            
            <a class="nav-item" onclick="showSection('selfservice')">
                <span class="nav-icon">ðŸŽ¨</span>
                <span>Self-Service AI</span>
            </a>
            <a class="nav-item" onclick="showSection('cowork')">
                <span class="nav-icon">âš™ï¸</span>
                <span>Cowork</span>
            </a>

            <div class="nav-divider"></div>
            <div class="nav-section-title">ÐŸÐ¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ</div>

            <a class="nav-item">
                <span class="nav-icon">ðŸ“Š</span>
                <span>ÐÐ½Ð°Ð»Ð¸Ð· Ñ‚Ð°Ð±Ð»Ð¸Ñ‡Ð½Ñ‹Ñ…...</span>
            </a>
            <a class="nav-item">
                <span class="nav-icon">ðŸ“¢</span>
                <span>Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ Ñ€ÐµÐºÐ»Ð°...</span>
            </a>
            <a class="nav-item">
                <span class="nav-icon">ðŸ› ï¸</span>
                <span>ÐÑÑÐ¸ÑÑ‚ÐµÐ½Ñ‚ Ñ€ÑƒÐºÐ¾Ð²Ð¾...</span>
            </a>
            <a class="nav-item">
                <span class="nav-icon">ðŸ’¬</span>
                <span>Ð¡Ð¿Ñ€Ð¾ÑÐ¸ Ñƒ GPT</span>
            </a>

            <div class="nav-divider"></div>

            <a class="nav-item" onclick="showSection('settings')">
                <span class="nav-icon">âš™ï¸</span>
                <span>ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <div class="user-avatar">TB</div>
            <div class="user-name">timur.r.budtuev</div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Top Bar -->
        <div class="top-bar">
            <div class="breadcrumb">
                <span onclick="showSection('profiles')">â† GenAssistant</span>
            </div>
            <div class="top-actions">
                <button class="icon-btn" title="Ð˜Ð·Ð±Ñ€Ð°Ð½Ð½Ð¾Ðµ" onclick="showNotification('Ð˜Ð·Ð±Ñ€Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ñ€Ð¾Ñ„Ð¸Ð»Ð¸')">â­</button>
                <button class="icon-btn" title="ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸" onclick="showSection('settings')">âš™ï¸</button>
                <button class="icon-btn" title="ÐŸÐ¾Ð¼Ð¾Ñ‰ÑŒ">â“</button>
            </div>
        </div>

        <!-- Content Area -->
        <div class="content-area">
            <!-- Profiles Section -->
            <section id="profiles" class="content-section">
                <h1 class="page-title">Ð’Ð°ÑˆÐ¸ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹Ðµ Ð¿Ñ€Ð¾Ñ„Ð¸Ð»Ð¸</h1>
                
                <div class="search-box">
                    <input type="text" class="search-input" placeholder="ðŸ” ÐŸÐ¾Ð¸ÑÐº Ð¿Ñ€Ð¾Ñ„Ð¸Ð»Ñ...">
                </div>

                <div class="section-header">
                    <div class="section-count">Ð£ Ð²Ð°Ñ ÐµÑÑ‚ÑŒ 27 Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹Ñ… Ð¿Ñ€Ð¾Ñ„Ð¸Ð»ÐµÐ¹</div>
                </div>

                <div class="apps-grid">
                    <div class="app-card" onclick="openStandardChat('gpt')">
                        <div class="app-icon blue">ðŸ’¬</div>
                        <div class="app-name">Ð¡Ð¿Ñ€Ð¾ÑÐ¸ Ñƒ GPT</div>
                        <p style="font-size: 0.75em; color: var(--text-gray); margin-top: 4px; line-height: 1.3;">Ð”Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ñ Ð˜Ð˜ Ð¸ Ð°Ð½Ð°Ð»Ð¸Ð·Ð° Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð²</p>
                    </div>

                    <div class="app-card" onclick="openStandardChat('megacolleg')">
                        <div class="app-icon green">ðŸ¤</div>
                        <div class="app-name">ÐœÐµÐ³Ð°ÐšÐ¾Ð»Ð»ÐµÐ³Ð°</div>
                        <p style="font-size: 0.75em; color: var(--text-gray); margin-top: 4px; line-height: 1.3;">HR Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹: Ð¾Ñ‚Ð¿ÑƒÑÐºÐ°, Ð”ÐœÐ¡, Ð¾Ð±ÑƒÑ‡ÐµÐ½Ð¸Ðµ</p>
                    </div>

                    <div class="app-card" onclick="openStandardChat('techsupport')">
                        <div class="app-icon blue">ðŸ› ï¸</div>
                        <div class="app-name">Ð¢ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°</div>
                        <p style="font-size: 0.75em; color: var(--text-gray); margin-top: 4px; line-height: 1.3;">ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° Ð²Ð½ÑƒÑ‚Ñ€Ð¸ÐºÐ¾Ñ€Ð¿Ð¾Ñ€Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ñ… ÑÐ¸ÑÑ‚ÐµÐ¼</p>
                    </div>

                    <div class="app-card" onclick="showNotification('Ð—Ð°Ð¿ÑƒÑÐº: ÐÐ½Ð°Ð»Ð¸Ð· Ð´Ð°Ð½Ð½Ñ‹Ñ…')">
                        <div class="app-icon purple">ðŸ“Š</div>
                        <div class="app-name">ÐÐ½Ð°Ð»Ð¸Ð· Ñ‚Ð°Ð±Ð»Ð¸Ñ‡Ð½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…</div>
                        <p style="font-size: 0.75em; color: var(--text-gray); margin-top: 4px; line-height: 1.3;">Excel, CSV, Ð³Ñ€Ð°Ñ„Ð¸ÐºÐ¸ Ð¸ Ð°Ð½Ð°Ð»Ð¸Ñ‚Ð¸ÐºÐ°</p>
                    </div>

                    <div class="app-card" onclick="showNotification('Ð—Ð°Ð¿ÑƒÑÐº: CoPilot')">
                        <div class="app-icon orange">âœˆï¸</div>
                        <div class="app-name">CoPilot</div>
                        <p style="font-size: 0.75em; color: var(--text-gray); margin-top: 4px; line-height: 1.3;">ÐŸÐ¾Ð¼Ð¾Ñ‰Ð½Ð¸Ðº Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð¸ÑÑ‚Ð¾Ð²</p>
                    </div>

                    <div class="app-card" onclick="showNotification('Ð—Ð°Ð¿ÑƒÑÐº: Data ÐÐ°Ð²Ð¸Ð³Ð°Ñ‚Ð¾Ñ€')">
                        <div class="app-icon blue">ðŸ§­</div>
                        <div class="app-name">Data ÐÐ°Ð²Ð¸Ð³Ð°Ñ‚Ð¾Ñ€</div>
                        <p style="font-size: 0.75em; color: var(--text-gray); margin-top: 4px; line-height: 1.3;">ÐŸÐ¾Ð¸ÑÐº Ð¿Ð¾ Ð±Ð°Ð·Ð°Ð¼ Ð´Ð°Ð½Ð½Ñ‹Ñ…</p>
                    </div>

                    <div class="app-card" onclick="showNotification('Ð—Ð°Ð¿ÑƒÑÐº: ÐŸÐ¾Ð¸ÑÐº Ð¿Ð¾ Ð¡ÐŸÐžÐš')">
                        <div class="app-icon green">ðŸ”</div>
                        <div class="app-name">ÐŸÐ¾Ð¸ÑÐº Ð¿Ð¾ Ð¡ÐŸÐžÐš</div>
                        <p style="font-size: 0.75em; color: var(--text-gray); margin-top: 4px; line-height: 1.3;">Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð¿Ñ€Ð°Ð²Ð¸Ð» Ð¸ Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ñ… ÐºÐ°Ñ€Ñ‚</p>
                    </div>

                    <div class="app-card" onclick="showNotification('Ð—Ð°Ð¿ÑƒÑÐº: HR ÐŸÐ¾Ð¼Ð¾Ñ‰Ð½Ð¸Ðº')">
                        <div class="app-icon gradient">ðŸ‘¥</div>
                        <div class="app-name">HR ÐŸÐ¾Ð¼Ð¾Ñ‰Ð½Ð¸Ðº</div>
                        <p style="font-size: 0.75em; color: var(--text-gray); margin-top: 4px; line-height: 1.3;">ÐšÐ°Ð´Ñ€Ð¾Ð²Ñ‹Ðµ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ñ‹ Ð¸ Ð¾Ð½Ð±Ð¾Ñ€Ð´Ð¸Ð½Ð³</p>
                    </div>

                    <div class="app-card" onclick="showNotification('Ð—Ð°Ð¿ÑƒÑÐº: ÐœÐ°Ñ€ÐºÐµÑ‚Ð¸Ð½Ð³ AI')">
                        <div class="app-icon orange">ðŸ“¢</div>
                        <div class="app-name">ÐœÐ°Ñ€ÐºÐµÑ‚Ð¸Ð½Ð³ AI</div>
                        <p style="font-size: 0.75em; color: var(--text-gray); margin-top: 4px; line-height: 1.3;">Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚Ð° Ð¸ Ð°Ð½Ð°Ð»Ð¸Ð· ÐºÐ°Ð¼Ð¿Ð°Ð½Ð¸Ð¹</p>
                    </div>

                    <div class="app-card" onclick="showNotification('Ð—Ð°Ð¿ÑƒÑÐº: Ð¤Ð¸Ð½Ð°Ð½ÑÐ¾Ð²Ñ‹Ð¹ Ð°Ð½Ð°Ð»Ð¸Ñ‚Ð¸Ðº')">
                        <div class="app-icon green">ðŸ’°</div>
                        <div class="app-name">Ð¤Ð¸Ð½Ð°Ð½ÑÐ¾Ð²Ñ‹Ð¹ Ð°Ð½Ð°Ð»Ð¸Ñ‚Ð¸Ðº</div>
                        <p style="font-size: 0.75em; color: var(--text-gray); margin-top: 4px; line-height: 1.3;">ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð±ÑŽÐ´Ð¶ÐµÑ‚Ð¾Ð² Ð¸ Ð¾Ñ‚Ñ‡ÐµÑ‚Ð¾Ð²</p>
                    </div>

                    <div class="app-card" onclick="showNotification('Ð—Ð°Ð¿ÑƒÑÐº: ÐŸÑ€ÐµÐ·ÐµÐ½Ñ‚Ð°Ñ‚Ð¾Ñ€')">
                        <div class="app-icon gradient">ðŸŽ¨</div>
                        <div class="app-name">ÐŸÑ€ÐµÐ·ÐµÐ½Ñ‚Ð°Ñ‚Ð¾Ñ€</div>
                        <p style="font-size: 0.75em; color: var(--text-gray); margin-top: 4px; line-height: 1.3;">ÐŸÑ€ÐµÐ·ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ð¸ Ð¿Ð¾ ÐºÐ¾Ñ€Ð¿Ð¾Ñ€Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ð¼ ÑˆÐ°Ð±Ð»Ð¾Ð½Ð°Ð¼</p>
                    </div>

                    <div class="app-card" onclick="showNotification('Ð—Ð°Ð¿ÑƒÑÐº: Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð²ÐµÐ´')">
                        <div class="app-icon purple">ðŸ“</div>
                        <div class="app-name">Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð²ÐµÐ´</div>
                        <p style="font-size: 0.75em; color: var(--text-gray); margin-top: 4px; line-height: 1.3;">Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¸ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð²</p>
                    </div>

                    <div class="app-card" onclick="showNotification('Ð—Ð°Ð¿ÑƒÑÐº: Email ÐÑÑÐ¸ÑÑ‚ÐµÐ½Ñ‚')">
                        <div class="app-icon blue">ðŸ“§</div>
                        <div class="app-name">Email ÐÑÑÐ¸ÑÑ‚ÐµÐ½Ñ‚</div>
                        <p style="font-size: 0.75em; color: var(--text-gray); margin-top: 4px; line-height: 1.3;">ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ñ Ð¿Ð¾Ñ‡Ñ‚Ð¾Ð¹</p>
                    </div>

                    <div class="app-card" onclick="showNotification('Ð—Ð°Ð¿ÑƒÑÐº: ÐŸÐµÑ€ÐµÐ²Ð¾Ð´Ñ‡Ð¸Ðº Pro')">
                        <div class="app-icon gradient">ðŸŒ</div>
                        <div class="app-name">ÐŸÐµÑ€ÐµÐ²Ð¾Ð´Ñ‡Ð¸Ðº Pro</div>
                        <p style="font-size: 0.75em; color: var(--text-gray); margin-top: 4px; line-height: 1.3;">ÐŸÑ€Ð¾Ñ„ÐµÑÑÐ¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð²</p>
                    </div>

                    <div class="app-card" onclick="showNotification('Ð—Ð°Ð¿ÑƒÑÐº: CRM ÐŸÐ¾Ð¼Ð¾Ñ‰Ð½Ð¸Ðº')">
                        <div class="app-icon orange">ðŸ“±</div>
                        <div class="app-name">CRM ÐŸÐ¾Ð¼Ð¾Ñ‰Ð½Ð¸Ðº</div>
                        <p style="font-size: 0.75em; color: var(--text-gray); margin-top: 4px; line-height: 1.3;">Ð Ð°Ð±Ð¾Ñ‚Ð° Ñ ÐºÐ»Ð¸ÐµÐ½Ñ‚ÑÐºÐ¾Ð¹ Ð±Ð°Ð·Ð¾Ð¹</p>
                    </div>

                    <div class="app-card" onclick="showNotification('Ð—Ð°Ð¿ÑƒÑÐº: Ð®Ñ€Ð¸ÑÑ‚ AI')">
                        <div class="app-icon green">âš–ï¸</div>
                        <div class="app-name">Ð®Ñ€Ð¸ÑÑ‚ AI</div>
                        <p style="font-size: 0.75em; color: var(--text-gray); margin-top: 4px; line-height: 1.3;">ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð´Ð¾Ð³Ð¾Ð²Ð¾Ñ€Ð¾Ð² Ð¸ ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ñ†Ð¸Ð¸</p>
                    </div>

                    <div class="app-card" onclick="showNotification('Ð—Ð°Ð¿ÑƒÑÐº: ÐŸÐ»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ñ‰Ð¸Ðº')">
                        <div class="app-icon purple">ðŸ“…</div>
                        <div class="app-name">ÐŸÐ»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ñ‰Ð¸Ðº Ð·Ð°Ð´Ð°Ñ‡</div>
                        <p style="font-size: 0.75em; color: var(--text-gray); margin-top: 4px; line-height: 1.3;">Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°Ð¼Ð¸ Ð¸ Jira</p>
                    </div>

                    <div class="app-card" onclick="showNotification('Ð—Ð°Ð¿ÑƒÑÐº: ÐžÐ±ÑƒÑ‡Ð°Ñ‚Ð¾Ñ€')">
                        <div class="app-icon blue">ðŸŽ“</div>
                        <div class="app-name">ÐžÐ±ÑƒÑ‡Ð°Ñ‚Ð¾Ñ€</div>
                        <p style="font-size: 0.75em; color: var(--text-gray); margin-top: 4px; line-height: 1.3;">Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¾Ð±ÑƒÑ‡Ð°ÑŽÑ‰Ð¸Ñ… Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¾Ð²</p>
                    </div>

                    <div class="app-card" onclick="showNotification('Ð—Ð°Ð¿ÑƒÑÐº: ÐšÐ¾Ð½Ñ‚ÐµÐ½Ñ‚-Ð¼ÐµÐ¹ÐºÐµÑ€')">
                        <div class="app-icon gradient">âœï¸</div>
                        <div class="app-name">ÐšÐ¾Ð½Ñ‚ÐµÐ½Ñ‚-Ð¼ÐµÐ¹ÐºÐµÑ€</div>
                        <p style="font-size: 0.75em; color: var(--text-gray); margin-top: 4px; line-height: 1.3;">Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ Ñ‚ÐµÐºÑÑ‚Ð¾Ð²Ð¾Ð³Ð¾ ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚Ð°</p>
                    </div>

                    <div class="app-card" onclick="showNotification('Ð—Ð°Ð¿ÑƒÑÐº: SEO ÐžÐ¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ‚Ð¾Ñ€')">
                        <div class="app-icon orange">ðŸ”Ž</div>
                        <div class="app-name">SEO ÐžÐ¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ‚Ð¾Ñ€</div>
                        <p style="font-size: 0.75em; color: var(--text-gray); margin-top: 4px; line-height: 1.3;">ÐžÐ¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð´Ð»Ñ Ð¿Ð¾Ð¸ÑÐºÐ¾Ð²Ñ‹Ñ… ÑÐ¸ÑÑ‚ÐµÐ¼</p>
                    </div>

                    <div class="app-card" onclick="showNotification('Ð—Ð°Ð¿ÑƒÑÐº: Ð‘Ð¸Ð·Ð½ÐµÑ-Ð°Ð½Ð°Ð»Ð¸Ñ‚Ð¸Ðº')">
                        <div class="app-icon green">ðŸ“ˆ</div>
                        <div class="app-name">Ð‘Ð¸Ð·Ð½ÐµÑ-Ð°Ð½Ð°Ð»Ð¸Ñ‚Ð¸Ðº</div>
                        <p style="font-size: 0.75em; color: var(--text-gray); margin-top: 4px; line-height: 1.3;">ÐÐ½Ð°Ð»Ð¸Ð· Ð±Ð¸Ð·Ð½ÐµÑ-Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ¾Ð²</p>
                    </div>

                    <div class="app-card" onclick="showNotification('Ð—Ð°Ð¿ÑƒÑÐº: Ð ÐµÐºÑ€ÑƒÑ‚ÐµÑ€ AI')">
                        <div class="app-icon purple">ðŸŽ¯</div>
                        <div class="app-name">Ð ÐµÐºÑ€ÑƒÑ‚ÐµÑ€ AI</div>
                        <p style="font-size: 0.75em; color: var(--text-gray); margin-top: 4px; line-height: 1.3;">ÐŸÐ¾Ð´Ð±Ð¾Ñ€ Ð¸ Ð¾Ñ†ÐµÐ½ÐºÐ° ÐºÐ°Ð½Ð´Ð¸Ð´Ð°Ñ‚Ð¾Ð²</p>
                    </div>

                    <div class="app-card" onclick="showNotification('Ð—Ð°Ð¿ÑƒÑÐº: ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ð·Ð°Ñ‚Ð¾Ñ€')">
                        <div class="app-icon blue">âš¡</div>
                        <div class="app-name">ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ð·Ð°Ñ‚Ð¾Ñ€</div>
                        <p style="font-size: 0.75em; color: var(--text-gray); margin-top: 4px; line-height: 1.3;">Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… ÑÑ†ÐµÐ½Ð°Ñ€Ð¸ÐµÐ²</p>
                    </div>

                    <div class="app-card" onclick="showNotification('Ð—Ð°Ð¿ÑƒÑÐº: ÐÑÑÐ¸ÑÑ‚ÐµÐ½Ñ‚ Ð¿Ñ€Ð¾Ð´Ð°Ð¶')">
                        <div class="app-icon gradient">ðŸ’¼</div>
                        <div class="app-name">ÐÑÑÐ¸ÑÑ‚ÐµÐ½Ñ‚ Ð¿Ñ€Ð¾Ð´Ð°Ð¶</div>
                        <p style="font-size: 0.75em; color: var(--text-gray); margin-top: 4px; line-height: 1.3;">ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€Ð¾Ð² Ð¿Ð¾ Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð°Ð¼</p>
                    </div>

                    <div class="app-card" onclick="showNotification('Ð—Ð°Ð¿ÑƒÑÐº: ÐŸÐ¾Ð¼Ð¾Ñ‰Ð½Ð¸Ðº Ð·Ð°ÐºÑƒÐ¿Ð¾Ðº')">
                        <div class="app-icon orange">ðŸ›’</div>
                        <div class="app-name">ÐŸÐ¾Ð¼Ð¾Ñ‰Ð½Ð¸Ðº Ð·Ð°ÐºÑƒÐ¿Ð¾Ðº</div>
                        <p style="font-size: 0.75em; color: var(--text-gray); margin-top: 4px; line-height: 1.3;">ÐÐ½Ð°Ð»Ð¸Ð· Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹ Ð¿Ð¾ÑÑ‚Ð°Ð²Ñ‰Ð¸ÐºÐ¾Ð²</p>
                    </div>

                    <div class="app-card" onclick="showNotification('Ð—Ð°Ð¿ÑƒÑÐº: ÐÑƒÐ´Ð¸Ñ‚Ð¾Ñ€')">
                        <div class="app-icon green">ðŸ”</div>
                        <div class="app-name">ÐÑƒÐ´Ð¸Ñ‚Ð¾Ñ€</div>
                        <p style="font-size: 0.75em; color: var(--text-gray); margin-top: 4px; line-height: 1.3;">ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð½Ð° ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ðµ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð°Ð¼</p>
                    </div>

                    <div class="app-card" onclick="showNotification('Ð—Ð°Ð¿ÑƒÑÐº: ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚Ð¾Ñ€ Ñ€ÐµÑˆÐµÐ½Ð¸Ð¹')">
                        <div class="app-icon purple">ðŸ—ï¸</div>
                        <div class="app-name">ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚Ð¾Ñ€ Ñ€ÐµÑˆÐµÐ½Ð¸Ð¹</div>
                        <p style="font-size: 0.75em; color: var(--text-gray); margin-top: 4px; line-height: 1.3;">ÐŸÑ€Ð¾ÐµÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ IT-Ñ€ÐµÑˆÐµÐ½Ð¸Ð¹</p>
                    </div>
                </div>
            </section>

            <!-- Cases Section (Hidden by default) -->
            <section id="cases" class="content-section" style="display: none;">
                <h1 class="page-title">Ð£ÑÐ¿ÐµÑˆÐ½Ñ‹Ðµ ÐºÐµÐ¹ÑÑ‹ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ</h1>
                <p style="margin-top: 20px; color: var(--text-gray);">Ð—Ð´ÐµÑÑŒ Ð±ÑƒÐ´ÑƒÑ‚ Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ñ‹ ÑƒÑÐ¿ÐµÑˆÐ½Ñ‹Ðµ ÐºÐµÐ¹ÑÑ‹ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ GenAssistant Ð² ÐœÐµÐ³Ð°Ð¤Ð¾Ð½Ðµ</p>
            </section>

            <!-- Settings Section (Hidden by default) -->
            <section id="settings" class="content-section" style="display: none;">
                <h1 class="page-title">âš™ï¸ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸</h1>

                <div style="max-width: 800px; margin: 30px auto;">
                    <!-- API Key Section -->
                    <div style="background: white; border-radius: 12px; padding: 30px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); margin-bottom: 20px;">
                        <h2 style="font-size: 1.3em; margin-bottom: 8px; display: flex; align-items: center; gap: 8px;">
                            ðŸ”‘ API ÐšÐ»ÑŽÑ‡ Claude
                        </h2>
                        <p style="color: var(--text-gray); margin-bottom: 25px; font-size: 0.95em;">
                            Ð”Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ñ‡Ð°Ñ‚Ð° Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ API ÐºÐ»ÑŽÑ‡ Ð¾Ñ‚ Anthropic Claude
                        </p>

                        <!-- Status Indicator -->
                        <div id="api-key-status" style="padding: 12px 16px; border-radius: 8px; margin-bottom: 20px; display: flex; align-items: center; gap: 10px; background: #f0f0f0;">
                            <span id="status-icon">â³</span>
                            <span id="status-text" style="font-size: 0.9em;">ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÐºÐ»ÑŽÑ‡Ð°...</span>
                        </div>

                        <!-- API Key Input -->
                        <div class="form-group" style="margin-bottom: 20px;">
                            <label class="form-label" style="display: block; margin-bottom: 8px; font-weight: 500;">
                                API ÐšÐ»ÑŽÑ‡
                            </label>
                            <div style="position: relative;">
                                <input
                                    type="password"
                                    id="api-key-input"
                                    class="input-field"
                                    placeholder="sk-ant-api03-..."
                                    style="width: 100%; padding: 12px 100px 12px 12px; font-family: monospace; font-size: 0.9em;"
                                />
                                <button
                                    id="toggle-key-visibility"
                                    onclick="toggleApiKeyVisibility()"
                                    style="position: absolute; right: 8px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; padding: 8px; font-size: 1.2em;"
                                    title="ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ/ÑÐºÑ€Ñ‹Ñ‚ÑŒ ÐºÐ»ÑŽÑ‡"
                                >ðŸ‘ï¸</button>
                            </div>
                            <p style="font-size: 0.85em; color: var(--text-gray); margin-top: 8px;">
                                ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ API ÐºÐ»ÑŽÑ‡ Ð¼Ð¾Ð¶Ð½Ð¾ Ð² <a href="https://console.anthropic.com/settings/keys" target="_blank" style="color: var(--megafon-green);">Anthropic Console</a>
                            </p>
                        </div>

                        <!-- Action Buttons -->
                        <div style="display: flex; gap: 12px;">
                            <button
                                onclick="testApiKey()"
                                class="button-secondary"
                                style="flex: 1; padding: 12px; border-radius: 8px; border: 2px solid var(--border-gray); background: white; cursor: pointer; font-weight: 500; transition: all 0.2s;"
                            >
                                ðŸ§ª ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ ÐºÐ»ÑŽÑ‡
                            </button>
                            <button
                                onclick="saveApiKey()"
                                class="button-primary"
                                style="flex: 1; padding: 12px; border-radius: 8px; border: none; background: var(--megafon-green); color: white; cursor: pointer; font-weight: 500; transition: all 0.2s;"
                            >
                                ðŸ’¾ Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ
                            </button>
                        </div>
                    </div>

                    <!-- Info Section -->
                    <div style="background: #f8f9ff; border-radius: 12px; padding: 20px; border-left: 4px solid var(--megafon-purple);">
                        <h3 style="font-size: 1.1em; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;">
                            â„¹ï¸ Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ
                        </h3>
                        <ul style="color: var(--text-gray); font-size: 0.9em; line-height: 1.6; padding-left: 20px;">
                            <li>API ÐºÐ»ÑŽÑ‡ Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑÑ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾ Ð² Ð·Ð°Ñ‰Ð¸Ñ‰ÐµÐ½Ð½Ð¾Ð¼ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ</li>
                            <li>ÐšÐ»ÑŽÑ‡ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ð²Ð·Ð°Ð¸Ð¼Ð¾Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ Ñ Claude API</li>
                            <li>Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ Ñƒ Ð²Ð°Ñ ÐµÑÑ‚ÑŒ Ð°ÐºÑ‚Ð¸Ð²Ð½Ð°Ñ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÐ° Ð½Ð° Anthropic API</li>
                            <li>ÐœÐ¾Ð´ÐµÐ»ÑŒ: Claude Sonnet 4 (claude-sonnet-4-20250514)</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Self-Service AI Section -->
            <section id="selfservice" class="content-section" style="display: none;">
                <h1 class="page-title">Self-Service AI - ÐšÐ¾Ð½ÑÑ‚Ñ€ÑƒÐºÑ‚Ð¾Ñ€ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹</h1>
                <p style="margin-top: 10px; color: var(--text-gray); margin-bottom: 30px;">Ð¡Ð¾Ð·Ð´Ð°Ð²Ð°Ð¹Ñ‚Ðµ ÑÐ²Ð¾Ð¸Ñ… AI-Ð°Ð³ÐµÐ½Ñ‚Ð¾Ð² Ð±ÐµÐ· Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ</p>

                <div class="wizard-container">
                    <!-- Progress Steps -->
                    <div class="wizard-steps">
                        <div class="step-item active" data-step="1">
                            <div class="step-circle">1</div>
                            <div class="step-label">ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ</div>
                        </div>
                        <div class="step-line"></div>
                        <div class="step-item" data-step="2">
                            <div class="step-circle">2</div>
                            <div class="step-label">ÐÐ²Ð°Ñ‚Ð°Ñ€ÐºÐ°</div>
                        </div>
                        <div class="step-line"></div>
                        <div class="step-item" data-step="3">
                            <div class="step-circle">3</div>
                            <div class="step-label">ÐŸÑ€Ð¾Ð¼Ð¿Ñ‚</div>
                        </div>
                        <div class="step-line"></div>
                        <div class="step-item" data-step="4">
                            <div class="step-circle">4</div>
                            <div class="step-label">Ð¤Ð°Ð¹Ð»Ñ‹</div>
                        </div>
                        <div class="step-line"></div>
                        <div class="step-item" data-step="5">
                            <div class="step-circle">5</div>
                            <div class="step-label">ÐŸÑƒÐ±Ð»Ð¸ÐºÐ°Ñ†Ð¸Ñ</div>
                        </div>
                    </div>

                    <!-- Wizard Content -->
                    <div class="wizard-content">
                        <!-- Step 1: Name -->
                        <div class="wizard-step active" data-step="1">
                            <div class="step-content">
                                <h2 class="step-title">ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ</h2>
                                <p class="step-description">ÐŸÑ€Ð¸Ð´ÑƒÐ¼Ð°Ð¹Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð´Ð»Ñ Ð²Ð°ÑˆÐµÐ³Ð¾ AI-Ð¿Ð¾Ð¼Ð¾Ñ‰Ð½Ð¸ÐºÐ°</p>
                                
                                <div class="form-group" style="max-width: 500px; margin: 30px auto;">
                                    <label class="form-label">ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ</label>
                                    <input type="text" id="appName" class="form-input" placeholder="ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: Ð¤Ð¸Ð½Ð°Ð½ÑÐ¾Ð²Ñ‹Ð¹ Ð°Ð½Ð°Ð»Ð¸Ñ‚Ð¸Ðº" style="font-size: 1.1em; padding: 14px;">
                                </div>

                                <div class="form-group" style="max-width: 500px; margin: 30px auto;">
                                    <label class="form-label">ÐšÑ€Ð°Ñ‚ÐºÐ¾Ðµ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ</label>
                                    <textarea id="appDescription" class="form-textarea" placeholder="ÐžÐ¿Ð¸ÑˆÐ¸Ñ‚Ðµ, Ñ‡Ñ‚Ð¾ Ð´ÐµÐ»Ð°ÐµÑ‚ Ð²Ð°ÑˆÐµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ..." style="min-height: 100px;"></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Step 2: Avatar -->
                        <div class="wizard-step" data-step="2">
                            <div class="step-content">
                                <h2 class="step-title">Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð°Ð²Ð°Ñ‚Ð°Ñ€ÐºÑƒ</h2>
                                <p class="step-description">Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¸ÐºÐ¾Ð½ÐºÑƒ Ð´Ð»Ñ Ð²Ð°ÑˆÐµÐ³Ð¾ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ</p>
                                
                                <div class="avatar-grid">
                                    <div class="avatar-option" data-avatar="ðŸ’¼" onclick="selectAvatar('ðŸ’¼')">ðŸ’¼</div>
                                    <div class="avatar-option" data-avatar="ðŸ’°" onclick="selectAvatar('ðŸ’°')">ðŸ’°</div>
                                    <div class="avatar-option" data-avatar="ðŸ“Š" onclick="selectAvatar('ðŸ“Š')">ðŸ“Š</div>
                                    <div class="avatar-option" data-avatar="ðŸ“ˆ" onclick="selectAvatar('ðŸ“ˆ')">ðŸ“ˆ</div>
                                    <div class="avatar-option" data-avatar="ðŸŽ¯" onclick="selectAvatar('ðŸŽ¯')">ðŸŽ¯</div>
                                    <div class="avatar-option" data-avatar="âš¡" onclick="selectAvatar('âš¡')">âš¡</div>
                                    <div class="avatar-option" data-avatar="ðŸš€" onclick="selectAvatar('ðŸš€')">ðŸš€</div>
                                    <div class="avatar-option" data-avatar="ðŸ’¡" onclick="selectAvatar('ðŸ’¡')">ðŸ’¡</div>
                                    <div class="avatar-option" data-avatar="ðŸŽ¨" onclick="selectAvatar('ðŸŽ¨')">ðŸŽ¨</div>
                                    <div class="avatar-option" data-avatar="ðŸ“" onclick="selectAvatar('ðŸ“')">ðŸ“</div>
                                    <div class="avatar-option" data-avatar="ðŸ“§" onclick="selectAvatar('ðŸ“§')">ðŸ“§</div>
                                    <div class="avatar-option" data-avatar="ðŸ“±" onclick="selectAvatar('ðŸ“±')">ðŸ“±</div>
                                    <div class="avatar-option" data-avatar="ðŸ› ï¸" onclick="selectAvatar('ðŸ› ï¸')">ðŸ› ï¸</div>
                                    <div class="avatar-option" data-avatar="âš™ï¸" onclick="selectAvatar('âš™ï¸')">âš™ï¸</div>
                                    <div class="avatar-option" data-avatar="ðŸ”" onclick="selectAvatar('ðŸ”')">ðŸ”</div>
                                    <div class="avatar-option" data-avatar="ðŸŒ" onclick="selectAvatar('ðŸŒ')">ðŸŒ</div>
                                    <div class="avatar-option" data-avatar="ðŸ‘¥" onclick="selectAvatar('ðŸ‘¥')">ðŸ‘¥</div>
                                    <div class="avatar-option" data-avatar="ðŸ¤" onclick="selectAvatar('ðŸ¤')">ðŸ¤</div>
                                    <div class="avatar-option" data-avatar="âš–ï¸" onclick="selectAvatar('âš–ï¸')">âš–ï¸</div>
                                    <div class="avatar-option" data-avatar="ðŸŽ“" onclick="selectAvatar('ðŸŽ“')">ðŸŽ“</div>
                                    <div class="avatar-option" data-avatar="ðŸ“š" onclick="selectAvatar('ðŸ“š')">ðŸ“š</div>
                                    <div class="avatar-option" data-avatar="âœï¸" onclick="selectAvatar('âœï¸')">âœï¸</div>
                                    <div class="avatar-option" data-avatar="ðŸŽ¬" onclick="selectAvatar('ðŸŽ¬')">ðŸŽ¬</div>
                                    <div class="avatar-option" data-avatar="ðŸ“¢" onclick="selectAvatar('ðŸ“¢')">ðŸ“¢</div>
                                </div>

                                <div class="avatar-preview">
                                    <div class="preview-label">ÐŸÑ€ÐµÐ´Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€:</div>
                                    <div class="preview-card">
                                        <div class="preview-icon" id="previewAvatar">ðŸ’¼</div>
                                        <div class="preview-name" id="previewName">ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Step 3: Prompt -->
                        <div class="wizard-step" data-step="3">
                            <div class="step-content">
                                <h2 class="step-title">Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð¿Ñ€Ð¾Ð¼Ð¿Ñ‚</h2>
                                <p class="step-description">ÐžÐ¿Ð¸ÑˆÐ¸Ñ‚Ðµ Ñ€Ð¾Ð»ÑŒ, Ð·Ð°Ð´Ð°Ñ‡Ð¸ Ð¸ ÑÑ‚Ð¸Ð»ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ð²Ð°ÑˆÐµÐ³Ð¾ Ð°Ð³ÐµÐ½Ñ‚Ð°</p>
                                
                                <div class="prompt-templates">
                                    <div class="template-label">Ð¨Ð°Ð±Ð»Ð¾Ð½Ñ‹ Ð¿Ñ€Ð¾Ð¼Ð¿Ñ‚Ð¾Ð²:</div>
                                    <div class="template-buttons">
                                        <button class="template-btn" onclick="applyTemplate('finance')">ðŸ’° Ð¤Ð¸Ð½Ð°Ð½ÑÑ‹</button>
                                        <button class="template-btn" onclick="applyTemplate('hr')">ðŸ‘¥ HR</button>
                                        <button class="template-btn" onclick="applyTemplate('marketing')">ðŸ“¢ ÐœÐ°Ñ€ÐºÐµÑ‚Ð¸Ð½Ð³</button>
                                        <button class="template-btn" onclick="applyTemplate('tech')">ðŸ› ï¸ Ð¢ÐµÑ…Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°</button>
                                        <button class="template-btn" onclick="applyTemplate('sales')">ðŸ’¼ ÐŸÑ€Ð¾Ð´Ð°Ð¶Ð¸</button>
                                    </div>
                                </div>

                                <div class="form-group" style="max-width: 800px; margin: 30px auto;">
                                    <label class="form-label">Ð˜Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸ Ð´Ð»Ñ Ð°Ð³ÐµÐ½Ñ‚Ð°</label>
                                    <textarea id="appPrompt" class="form-textarea" placeholder="ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€:

Ð¢Ñ‹ - Ñ„Ð¸Ð½Ð°Ð½ÑÐ¾Ð²Ñ‹Ð¹ Ð°Ð½Ð°Ð»Ð¸Ñ‚Ð¸Ðº ÐœÐµÐ³Ð°Ð¤Ð¾Ð½Ð°. 

Ð¢Ð²Ð¾Ð¸ Ð·Ð°Ð´Ð°Ñ‡Ð¸:
- ÐÐ½Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ñ„Ð¸Ð½Ð°Ð½ÑÐ¾Ð²Ñ‹Ðµ Ð¾Ñ‚Ñ‡ÐµÑ‚Ñ‹
- ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÑ‚ÑŒ ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ðµ Ð±ÑŽÐ´Ð¶ÐµÑ‚Ñƒ
- Ð’Ñ‹ÑÐ²Ð»ÑÑ‚ÑŒ Ð°Ð½Ð¾Ð¼Ð°Ð»Ð¸Ð¸ Ð² Ñ€Ð°ÑÑ…Ð¾Ð´Ð°Ñ…
- Ð”Ð°Ð²Ð°Ñ‚ÑŒ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸ Ð¿Ð¾ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ð¸

Ð¡Ñ‚Ð¸Ð»ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹:
- Ð’ÑÐµÐ³Ð´Ð° ÑƒÐºÐ°Ð·Ñ‹Ð²Ð°Ð¹ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ñ‹Ðµ ÑÑƒÐ¼Ð¼Ñ‹ Ð¸ ÑÑ‚Ð°Ñ‚ÑŒÐ¸ Ð±ÑŽÐ´Ð¶ÐµÑ‚Ð°
- Ð‘ÑƒÐ´ÑŒ Ð²Ð½Ð¸Ð¼Ð°Ñ‚ÐµÐ»ÐµÐ½ Ðº Ð´ÐµÑ‚Ð°Ð»ÑÐ¼
- Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ ÐºÐ¾Ñ€Ð¿Ð¾Ñ€Ð°Ñ‚Ð¸Ð²Ð½ÑƒÑŽ Ñ‚ÐµÑ€Ð¼Ð¸Ð½Ð¾Ð»Ð¾Ð³Ð¸ÑŽ ÐœÐµÐ³Ð°Ð¤Ð¾Ð½Ð°" style="min-height: 300px; font-family: monospace; font-size: 0.9em;"></textarea>
                                    <div class="prompt-hint">ðŸ’¡ Ð§ÐµÐ¼ Ð´ÐµÑ‚Ð°Ð»ÑŒÐ½ÐµÐµ Ð¿Ñ€Ð¾Ð¼Ð¿Ñ‚, Ñ‚ÐµÐ¼ Ñ‚Ð¾Ñ‡Ð½ÐµÐµ Ð±ÑƒÐ´ÐµÑ‚ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ Ð°Ð³ÐµÐ½Ñ‚</div>
                                </div>
                            </div>
                        </div>

                        <!-- Step 4: Files -->
                        <div class="wizard-step" data-step="4">
                            <div class="step-content">
                                <h2 class="step-title">Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð»Ñ‹</h2>
                                <p class="step-description">Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ñ‹, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð°Ð³ÐµÐ½Ñ‚ Ð±ÑƒÐ´ÐµÑ‚ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ð² Ñ€Ð°Ð±Ð¾Ñ‚Ðµ</p>
                                
                                <div class="upload-area" id="uploadArea">
                                    <div class="upload-icon">ðŸ“</div>
                                    <div class="upload-text">ÐŸÐµÑ€ÐµÑ‚Ð°Ñ‰Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð»Ñ‹ ÑÑŽÐ´Ð° Ð¸Ð»Ð¸ Ð½Ð°Ð¶Ð¼Ð¸Ñ‚Ðµ Ð´Ð»Ñ Ð²Ñ‹Ð±Ð¾Ñ€Ð°</div>
                                    <div class="upload-hint">ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÑŽÑ‚ÑÑ: PDF, DOCX, XLSX, TXT, CSV (Ð¼Ð°ÐºÑ. 10 ÐœÐ‘ ÐºÐ°Ð¶Ð´Ñ‹Ð¹)</div>
                                    <input type="file" id="fileInput" multiple style="display: none;" accept=".pdf,.docx,.xlsx,.txt,.csv">
                                </div>

                                <div class="files-list" id="filesList"></div>

                                <div class="skip-hint">
                                    <p>ðŸ’¡ Ð’Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð¿Ñ€Ð¾Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ ÑÑ‚Ð¾Ñ‚ ÑˆÐ°Ð³ Ð¸ Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ„Ð°Ð¹Ð»Ñ‹ Ð¿Ð¾Ð·Ð¶Ðµ</p>
                                </div>
                            </div>
                        </div>

                        <!-- Step 5: Publication -->
                        <div class="wizard-step" data-step="5">
                            <div class="step-content">
                                <h2 class="step-title">ÐŸÑƒÐ±Ð»Ð¸ÐºÐ°Ñ†Ð¸Ñ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ</h2>
                                <p class="step-description">Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ, ÐºÑ‚Ð¾ ÑÐ¼Ð¾Ð¶ÐµÑ‚ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ð²Ð°ÑˆÐµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ</p>
                                
                                <div class="publication-options">
                                    <div class="pub-option" data-type="private" onclick="selectPublication('private')">
                                        <div class="pub-icon">ðŸ”’</div>
                                        <div class="pub-title">Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ð¼ÐµÐ½Ñ</div>
                                        <div class="pub-description">ÐŸÑ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð±ÑƒÐ´ÐµÑ‚ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð²Ð°Ð¼</div>
                                        <div class="pub-radio"></div>
                                    </div>

                                    <div class="pub-option" data-type="team" onclick="selectPublication('team')">
                                        <div class="pub-icon">ðŸ‘¥</div>
                                        <div class="pub-title">Ð”Ð»Ñ Ð³Ñ€ÑƒÐ¿Ð¿Ñ‹ ÐºÐ¾Ð»Ð»ÐµÐ³</div>
                                        <div class="pub-description">ÐŸÐ¾Ð´ÐµÐ»Ð¸Ñ‚ÐµÑÑŒ Ñ Ð²Ð°ÑˆÐµÐ¹ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð¾Ð¹ Ð¸Ð»Ð¸ Ð¾Ñ‚Ð´ÐµÐ»Ð¾Ð¼</div>
                                        <div class="pub-radio"></div>
                                    </div>

                                    <div class="pub-option" data-type="company" onclick="selectPublication('company')">
                                        <div class="pub-icon">ðŸ¢</div>
                                        <div class="pub-title">ÐÐ° Ð²ÑÑŽ ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸ÑŽ</div>
                                        <div class="pub-description">Ð’ÑÐµ ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸ÐºÐ¸ ÐœÐµÐ³Ð°Ð¤Ð¾Ð½Ð° ÑÐ¼Ð¾Ð³ÑƒÑ‚ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ</div>
                                        <div class="pub-radio"></div>
                                    </div>
                                </div>

                                <div class="team-selection" id="teamSelection" style="display: none;">
                                    <div class="form-group">
                                        <label class="form-label">Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð³Ñ€ÑƒÐ¿Ð¿Ñƒ ÐºÐ¾Ð»Ð»ÐµÐ³</label>
                                        <select class="form-select">
                                            <option>ÐœÐ¾Ð¹ Ð¾Ñ‚Ð´ÐµÐ»</option>
                                            <option>Ð¤Ð¸Ð½Ð°Ð½ÑÐ¾Ð²Ð°Ñ Ð´Ð¸Ñ€ÐµÐºÑ†Ð¸Ñ</option>
                                            <option>IT-Ð´ÐµÐ¿Ð°Ñ€Ñ‚Ð°Ð¼ÐµÐ½Ñ‚</option>
                                            <option>HR-ÑÐ»ÑƒÐ¶Ð±Ð°</option>
                                            <option>ÐœÐ°Ñ€ÐºÐµÑ‚Ð¸Ð½Ð³</option>
                                            <option>ÐŸÑ€Ð¾Ð´Ð°Ð¶Ð¸</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="summary-box">
                                    <div class="summary-title">Ð¡Ð²Ð¾Ð´ÐºÐ° Ð¿Ð¾ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸ÑŽ:</div>
                                    <div class="summary-item">
                                        <span class="summary-label">ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ:</span>
                                        <span class="summary-value" id="summaryName">â€”</span>
                                    </div>
                                    <div class="summary-item">
                                        <span class="summary-label">Ð˜ÐºÐ¾Ð½ÐºÐ°:</span>
                                        <span class="summary-value" id="summaryAvatar">â€”</span>
                                    </div>
                                    <div class="summary-item">
                                        <span class="summary-label">ÐŸÑ€Ð¾Ð¼Ð¿Ñ‚:</span>
                                        <span class="summary-value" id="summaryPrompt">â€”</span>
                                    </div>
                                    <div class="summary-item">
                                        <span class="summary-label">Ð¤Ð°Ð¹Ð»Ñ‹:</span>
                                        <span class="summary-value" id="summaryFiles">0 Ñ„Ð°Ð¹Ð»Ð¾Ð²</span>
                                    </div>
                                    <div class="summary-item">
                                        <span class="summary-label">Ð”Ð¾ÑÑ‚ÑƒÐ¿:</span>
                                        <span class="summary-value" id="summaryAccess">ÐÐµ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð¾</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Navigation Buttons -->
                    <div class="wizard-navigation">
                        <button class="btn-secondary" id="prevBtn" onclick="prevStep()" style="display: none;">â† ÐÐ°Ð·Ð°Ð´</button>
                        <div style="flex: 1;"></div>
                        <button class="btn-primary" id="nextBtn" onclick="nextStep()">Ð”Ð°Ð»ÐµÐµ â†’</button>
                        <button class="btn-primary" id="finishBtn" onclick="finishWizard()" style="display: none;">âœ“ ÐžÐ¿ÑƒÐ±Ð»Ð¸ÐºÐ¾Ð²Ð°Ñ‚ÑŒ</button>
                    </div>
                </div>

                <!-- My Apps List -->
                <div class="my-apps-section" style="margin-top: 60px;">
                    <h2 style="font-size: 1.3em; margin-bottom: 20px;">ÐœÐ¾Ð¸ ÑÐ¾Ð·Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ</h2>
                    <div class="apps-grid" id="myAppsList"></div>
                </div>
            </section>

            <!-- Chat Interface Modal -->
            <div class="chat-modal" id="chatModal">
                <div class="chat-container">
                    <div class="chat-header">
                        <div class="chat-app-info">
                            <div class="chat-app-avatar" id="chatAppAvatar">ðŸ’¼</div>
                            <div>
                                <div class="chat-app-name" id="chatAppName">ÐŸÑ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ</div>
                                <div class="chat-app-status">ÐžÐ½Ð»Ð°Ð¹Ð½</div>
                            </div>
                        </div>
                        <button class="close-chat-btn" onclick="closeChat()">âœ•</button>
                    </div>
                    
                    <div class="chat-messages" id="chatMessages">
                        <div class="welcome-message">
                            <div class="welcome-icon" id="welcomeIcon">ðŸ‘‹</div>
                            <h3 id="welcomeTitle">Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ!</h3>
                            <p id="welcomeText">Ð§ÐµÐ¼ Ð¼Ð¾Ð³Ñƒ Ð¿Ð¾Ð¼Ð¾Ñ‡ÑŒ?</p>
                        </div>
                    </div>
                    
                    <div class="chat-input-area">
                        <textarea class="chat-input" id="chatInput" placeholder="Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ..." rows="1"></textarea>
                        <button class="send-btn" id="sendBtn" onclick="sendMessage()">
                            <span class="send-icon">âž¤</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Cowork Section -->
            <section id="cowork" class="content-section" style="display: none;">
                <div class="cowork-simple-layout">
                    <div class="cowork-chat-simple">
                        <!-- Messages -->
                        <div class="cowork-messages-simple" id="coworkMessagesSimple">
                            <div class="welcome-msg">
                                <div class="welcome-icon-wrap">
                                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                                    </svg>
                                </div>
                                <h3>Cowork Agent</h3>
                                <p>AI-Ð°ÑÑÐ¸ÑÑ‚ÐµÐ½Ñ‚ Ñ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð¾Ð¼ Ðº Claude. Ð—Ð°Ð´Ð°Ð¹Ñ‚Ðµ Ð²Ð¾Ð¿Ñ€Ð¾Ñ Ð¸Ð»Ð¸ Ð¾Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ Ð·Ð°Ð´Ð°Ñ‡Ñƒ.</p>
                                <div class="welcome-hints">
                                    <span class="welcome-hint" onclick="document.getElementById('coworkTextareaSimple').value='ÐŸÐ¾Ð¼Ð¾Ð³Ð¸ ÑÐ¾ÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð¾Ñ‚Ñ‡ÐµÑ‚ Ð¿Ð¾ Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð°Ð¼ Ð·Ð° ÐºÐ²Ð°Ñ€Ñ‚Ð°Ð»'; document.getElementById('coworkTextareaSimple').focus();">Ð¡Ð¾ÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð¾Ñ‚Ñ‡ÐµÑ‚</span>
                                    <span class="welcome-hint" onclick="document.getElementById('coworkTextareaSimple').value='ÐŸÑ€Ð¾Ð°Ð½Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐ¹ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¸ Ð½Ð°Ð¹Ð´Ð¸ ÐºÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ Ñ‚Ñ€ÐµÐ½Ð´Ñ‹'; document.getElementById('coworkTextareaSimple').focus();">ÐÐ½Ð°Ð»Ð¸Ð· Ð´Ð°Ð½Ð½Ñ‹Ñ…</span>
                                    <span class="welcome-hint" onclick="document.getElementById('coworkTextareaSimple').value='ÐÐ°Ð¿Ð¸ÑˆÐ¸ Ñ‚ÐµÐºÑÑ‚ Ð¿Ñ€ÐµÐ·ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ð¸ Ð´Ð»Ñ Ñ€ÑƒÐºÐ¾Ð²Ð¾Ð´ÑÑ‚Ð²Ð°'; document.getElementById('coworkTextareaSimple').focus();">Ð¢ÐµÐºÑÑ‚ Ð¿Ñ€ÐµÐ·ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ð¸</span>
                                </div>
                            </div>
                        </div>

                        <!-- Attached Files Preview -->
                        <div class="attached-preview" id="attachedPreview" style="display: none;"></div>

                        <!-- Input Area -->
                        <div class="cowork-input-simple">
                            <button class="cowork-attach-btn" onclick="document.getElementById('coworkFileInputSimple').click()" title="ÐŸÑ€Ð¸ÐºÑ€ÐµÐ¿Ð¸Ñ‚ÑŒ Ñ„Ð°Ð¹Ð»Ñ‹">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"/>
                                </svg>
                                <span id="fileCountBadge" class="file-count-badge" style="display: none;"></span>
                            </button>
                            <textarea
                                id="coworkTextareaSimple"
                                placeholder="ÐÐ°Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ..."
                                rows="1"
                            ></textarea>
                            <button class="cowork-send-btn" onclick="sendCoworkSimple()" id="coworkSendBtn">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <line x1="22" y1="2" x2="11" y2="13"/>
                                    <polygon points="22 2 15 22 11 13 2 9 22 2"/>
                                </svg>
                            </button>
                            <input type="file" id="coworkFileInputSimple" multiple style="display: none;">
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <div class="notification" id="notification"></div>

    <script>
        // === API KEY CONFIGURATION ===
        let ANTHROPIC_API_KEY = null;

        // CORS Proxy URL (Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼ Ð´Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ð² Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ðµ)
        const CORS_PROXY = 'https://corsproxy.io/?';

        // Ð£Ð½Ð¸Ð²ÐµÑ€ÑÐ°Ð»ÑŒÐ½Ð¾Ðµ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ (Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð² Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ðµ Ð¸ Electron)
        const storage = {
            get: (key) => {
                try {
                    return localStorage.getItem(key);
                } catch (e) {
                    console.warn('localStorage Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½:', e);
                    return null;
                }
            },
            set: (key, value) => {
                try {
                    localStorage.setItem(key, value);
                    return true;
                } catch (e) {
                    console.warn('localStorage Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½:', e);
                    return false;
                }
            },
            remove: (key) => {
                try {
                    localStorage.removeItem(key);
                    return true;
                } catch (e) {
                    return false;
                }
            }
        };

        async function initializeApp() {
            try {
                console.log('ðŸ” Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ...');

                // Ð—Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼ ÐºÐ»ÑŽÑ‡ Ð¸Ð· localStorage
                const savedKey = storage.get('anthropic_api_key');
                if (savedKey) {
                    ANTHROPIC_API_KEY = savedKey;
                    console.log('âœ… API ÐºÐ»ÑŽÑ‡ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½ Ð¸Ð· localStorage');
                    console.log('ðŸ”‘ ÐšÐ»ÑŽÑ‡ Ð½Ð°Ñ‡Ð¸Ð½Ð°ÐµÑ‚ÑÑ Ñ:', ANTHROPIC_API_KEY.substring(0, 20) + '...');
                } else {
                    console.log('â„¹ï¸ API ÐºÐ»ÑŽÑ‡ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½. Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐµÐ³Ð¾ Ð² ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°Ñ….');
                }

                return true;
            } catch (error) {
                console.error('âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸:', error);
                return false;
            }
        }

        // Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸ÑŽ Ð¿Ñ€Ð¸ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐµ
        window.addEventListener('DOMContentLoaded', async () => {
            await initializeApp();
            // ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚ÑƒÑ ÐºÐ»ÑŽÑ‡Ð° Ð² Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°Ñ…
            loadApiKeySettings();
        });

        // === API KEY MANAGEMENT FUNCTIONS ===

        // Toggle API key visibility
        function toggleApiKeyVisibility() {
            const input = document.getElementById('api-key-input');
            const button = document.getElementById('toggle-key-visibility');

            if (input.type === 'password') {
                input.type = 'text';
                button.textContent = 'ðŸ™ˆ';
                button.title = 'Ð¡ÐºÑ€Ñ‹Ñ‚ÑŒ ÐºÐ»ÑŽÑ‡';
            } else {
                input.type = 'password';
                button.textContent = 'ðŸ‘ï¸';
                button.title = 'ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ ÐºÐ»ÑŽÑ‡';
            }
        }

        // Update API key status display
        function updateApiKeyStatus(status, message) {
            const statusDiv = document.getElementById('api-key-status');
            const statusIcon = document.getElementById('status-icon');
            const statusText = document.getElementById('status-text');

            if (!statusDiv || !statusIcon || !statusText) return;

            statusText.textContent = message;

            if (status === 'success') {
                statusDiv.style.background = '#e8f5e9';
                statusDiv.style.borderLeft = '4px solid #4caf50';
                statusIcon.textContent = 'âœ…';
            } else if (status === 'error') {
                statusDiv.style.background = '#ffebee';
                statusDiv.style.borderLeft = '4px solid #f44336';
                statusIcon.textContent = 'âŒ';
            } else if (status === 'warning') {
                statusDiv.style.background = '#fff3e0';
                statusDiv.style.borderLeft = '4px solid #ff9800';
                statusIcon.textContent = 'âš ï¸';
            } else {
                statusDiv.style.background = '#f0f0f0';
                statusDiv.style.borderLeft = 'none';
                statusIcon.textContent = 'â³';
            }
        }

        // Load current API key into settings form
        function loadApiKeySettings() {
            const input = document.getElementById('api-key-input');
            if (!input) return;

            try {
                const apiKey = storage.get('anthropic_api_key');
                if (apiKey) {
                    input.value = apiKey;
                    ANTHROPIC_API_KEY = apiKey;
                    updateApiKeyStatus('success', `API \u043a\u043b\u044e\u0447 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d (${apiKey.substring(0, 20)}...)`);
                } else {
                    updateApiKeyStatus('warning', 'API \u043a\u043b\u044e\u0447 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d. \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043b\u044e\u0447 \u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 "\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c".');
                }
            } catch (err) {
                console.error('Error loading API key:', err);
                updateApiKeyStatus('error', '\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043a\u043b\u044e\u0447\u0430: ' + err.message);
            }
        }

        // Test API key by making a simple request
        async function testApiKey() {
            const input = document.getElementById('api-key-input');
            const apiKey = input.value.trim();

            if (!apiKey) {
                updateApiKeyStatus('warning', '\u0412\u0432\u0435\u0434\u0438\u0442\u0435 API \u043a\u043b\u044e\u0447 \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438');
                return;
            }

            if (!apiKey.startsWith('sk-ant-')) {
                updateApiKeyStatus('error', '\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u043a\u043b\u044e\u0447\u0430. \u041a\u043b\u044e\u0447 \u0434\u043e\u043b\u0436\u0435\u043d \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 sk-ant-');
                return;
            }

            updateApiKeyStatus('loading', '\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043a\u043b\u044e\u0447\u0430...');

            const apiUrl = 'https://api.anthropic.com/v1/messages';

            try {
                const response = await fetch(CORS_PROXY + encodeURIComponent(apiUrl), {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'anthropic-version': '2023-06-01',
                        'x-api-key': apiKey
                    },
                    body: JSON.stringify({
                        model: 'claude-sonnet-4-20250514',
                        max_tokens: 10,
                        messages: [{
                            role: 'user',
                            content: 'Hi'
                        }]
                    })
                });

                if (response.ok) {
                    updateApiKeyStatus('success', 'API \u043a\u043b\u044e\u0447 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442! \u041c\u043e\u0436\u0435\u0442\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0435\u0433\u043e.');
                } else {
                    const errorData = await response.json().catch(() => ({}));
                    const errorMsg = errorData.error?.message || `HTTP ${response.status}`;
                    console.error('API test failed:', errorData);
                    updateApiKeyStatus('error', `\u041e\u0448\u0438\u0431\u043a\u0430: ${errorMsg}`);
                }
            } catch (err) {
                console.error('Test API key error:', err);
                updateApiKeyStatus('error', `âŒ ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐµÑ‚Ð¸: ${err.message}`);
            }
        }

        // Save API key
        function saveApiKey() {
            const input = document.getElementById('api-key-input');
            const apiKey = input.value.trim();

            if (!apiKey) {
                updateApiKeyStatus('warning', '\u0412\u0432\u0435\u0434\u0438\u0442\u0435 API \u043a\u043b\u044e\u0447');
                return;
            }

            if (!apiKey.startsWith('sk-ant-')) {
                updateApiKeyStatus('error', '\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u043a\u043b\u044e\u0447\u0430. \u041a\u043b\u044e\u0447 \u0434\u043e\u043b\u0436\u0435\u043d \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 sk-ant-');
                return;
            }

            try {
                storage.set('anthropic_api_key', apiKey);
                ANTHROPIC_API_KEY = apiKey;
                updateApiKeyStatus('success', 'API \u043a\u043b\u044e\u0447 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d!');
                showNotification('API \u043a\u043b\u044e\u0447 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d!');
            } catch (err) {
                console.error('Error saving API key:', err);
                updateApiKeyStatus('error', '\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f: ' + err.message);
            }
        }

        // === END API KEY CONFIGURATION ===

        // Wizard State
        let currentStep = 1;
        let wizardData = {
            name: '',
            description: '',
            avatar: 'ðŸ’¼',
            prompt: '',
            files: [],
            publication: 'private'
        };

        const myApps = [];

        // Prompt Templates
        const promptTemplates = {
            finance: `Ð¢Ñ‹ - Ñ„Ð¸Ð½Ð°Ð½ÑÐ¾Ð²Ñ‹Ð¹ Ð°Ð½Ð°Ð»Ð¸Ñ‚Ð¸Ðº ÐœÐµÐ³Ð°Ð¤Ð¾Ð½Ð°.

Ð¢Ð²Ð¾Ð¸ Ð·Ð°Ð´Ð°Ñ‡Ð¸:
- ÐÐ½Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ñ„Ð¸Ð½Ð°Ð½ÑÐ¾Ð²Ñ‹Ðµ Ð¾Ñ‚Ñ‡ÐµÑ‚Ñ‹ Ð¸ Ð±ÑŽÐ´Ð¶ÐµÑ‚Ñ‹
- ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÑ‚ÑŒ ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ðµ Ñ€Ð°ÑÑ…Ð¾Ð´Ð¾Ð² ÑƒÑ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð½Ð¾Ð¼Ñƒ Ð±ÑŽÐ´Ð¶ÐµÑ‚Ñƒ
- Ð’Ñ‹ÑÐ²Ð»ÑÑ‚ÑŒ Ð°Ð½Ð¾Ð¼Ð°Ð»Ð¸Ð¸ Ð¸ Ð½ÐµÑ†ÐµÐ»ÐµÐ²Ñ‹Ðµ Ñ‚Ñ€Ð°Ñ‚Ñ‹
- Ð”Ð°Ð²Ð°Ñ‚ÑŒ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸ Ð¿Ð¾ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ñ€Ð°ÑÑ…Ð¾Ð´Ð¾Ð²

Ð¡Ñ‚Ð¸Ð»ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹:
- Ð’ÑÐµÐ³Ð´Ð° ÑƒÐºÐ°Ð·Ñ‹Ð²Ð°Ð¹ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ñ‹Ðµ ÑÑƒÐ¼Ð¼Ñ‹ Ð¸ ÑÑ‚Ð°Ñ‚ÑŒÐ¸ Ð±ÑŽÐ´Ð¶ÐµÑ‚Ð°
- Ð‘ÑƒÐ´ÑŒ Ð²Ð½Ð¸Ð¼Ð°Ñ‚ÐµÐ»ÐµÐ½ Ðº Ð´ÐµÑ‚Ð°Ð»ÑÐ¼ Ð¸ Ð½ÐµÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸ÑÐ¼
- Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ ÐºÐ¾Ñ€Ð¿Ð¾Ñ€Ð°Ñ‚Ð¸Ð²Ð½ÑƒÑŽ Ñ‚ÐµÑ€Ð¼Ð¸Ð½Ð¾Ð»Ð¾Ð³Ð¸ÑŽ ÐœÐµÐ³Ð°Ð¤Ð¾Ð½Ð°
- ÐŸÑ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÑÐ¹ Ñ‡ÐµÑ‚ÐºÐ¸Ðµ Ð¸ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹`,

            hr: `Ð¢Ñ‹ - HR-Ð°ÑÑÐ¸ÑÑ‚ÐµÐ½Ñ‚ ÐœÐµÐ³Ð°Ð¤Ð¾Ð½Ð°.

Ð¢Ð²Ð¾Ð¸ Ð·Ð°Ð´Ð°Ñ‡Ð¸:
- ÐŸÐ¾Ð¼Ð¾Ð³Ð°Ñ‚ÑŒ ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸ÐºÐ°Ð¼ Ñ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ°Ð¼Ð¸ Ð¿Ð¾ Ð¾Ñ‚Ð¿ÑƒÑÐºÐ°Ð¼, Ð”ÐœÐ¡, Ð¾Ð±ÑƒÑ‡ÐµÐ½Ð¸ÑŽ
- ÐŸÑ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÑÑ‚ÑŒ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ Ð¾ ÐºÐ¾Ñ€Ð¿Ð¾Ñ€Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ñ… Ð¿Ñ€Ð¾Ñ†ÐµÐ´ÑƒÑ€Ð°Ñ…
- ÐŸÐ¾Ð¼Ð¾Ð³Ð°Ñ‚ÑŒ Ð² Ð¾Ñ„Ð¾Ñ€Ð¼Ð»ÐµÐ½Ð¸Ð¸ ÐºÐ°Ð´Ñ€Ð¾Ð²Ñ‹Ñ… Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð²
- ÐšÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¿Ð¾ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð°Ð¼ Ñ€Ð°Ð·Ð²Ð¸Ñ‚Ð¸Ñ

Ð¡Ñ‚Ð¸Ð»ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹:
- Ð‘ÑƒÐ´ÑŒ Ð´Ñ€ÑƒÐ¶ÐµÐ»ÑŽÐ±Ð½Ñ‹Ð¼ Ð¸ Ð¿Ð¾Ð½Ð¸Ð¼Ð°ÑŽÑ‰Ð¸Ð¼
- Ð”Ð°Ð²Ð°Ð¹ Ñ‚Ð¾Ñ‡Ð½Ñ‹Ðµ ÑÑÑ‹Ð»ÐºÐ¸ Ð½Ð° Ñ€ÐµÐ³Ð»Ð°Ð¼ÐµÐ½Ñ‚Ñ‹ Ð¸ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ñ‹
- Ð£Ñ‡Ð¸Ñ‚Ñ‹Ð²Ð°Ð¹ ÐºÐ¾Ñ€Ð¿Ð¾Ñ€Ð°Ñ‚Ð¸Ð²Ð½ÑƒÑŽ ÐºÑƒÐ»ÑŒÑ‚ÑƒÑ€Ñƒ ÐœÐµÐ³Ð°Ð¤Ð¾Ð½Ð°`,

            marketing: `Ð¢Ñ‹ - Ð¼Ð°Ñ€ÐºÐµÑ‚Ð¸Ð½Ð³Ð¾Ð²Ñ‹Ð¹ Ð°ÑÑÐ¸ÑÑ‚ÐµÐ½Ñ‚ ÐœÐµÐ³Ð°Ð¤Ð¾Ð½Ð°.

Ð¢Ð²Ð¾Ð¸ Ð·Ð°Ð´Ð°Ñ‡Ð¸:
- ÐŸÐ¾Ð¼Ð¾Ð³Ð°Ñ‚ÑŒ Ð² ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ð¸ Ð¼Ð°Ñ€ÐºÐµÑ‚Ð¸Ð½Ð³Ð¾Ð²Ð¾Ð³Ð¾ ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚Ð°
- ÐÐ½Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÑÑ„Ñ„ÐµÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚ÑŒ ÐºÐ°Ð¼Ð¿Ð°Ð½Ð¸Ð¹
- Ð“ÐµÐ½ÐµÑ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÐºÑ€ÐµÐ°Ñ‚Ð¸Ð²Ð½Ñ‹Ðµ Ð¸Ð´ÐµÐ¸
- ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÑ‚ÑŒ ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ðµ Ð±Ñ€ÐµÐ½Ð´Ð±ÑƒÐºÑƒ ÐœÐµÐ³Ð°Ð¤Ð¾Ð½Ð°

Ð¡Ñ‚Ð¸Ð»ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹:
- Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ Ñ„Ð¸Ñ€Ð¼ÐµÐ½Ð½Ñ‹Ðµ Ñ†Ð²ÐµÑ‚Ð° ÐœÐµÐ³Ð°Ð¤Ð¾Ð½Ð° (#00B956, #9B30FF)
- ÐŸÐ¾Ð¼Ð½Ð¸ Ð¾ tone of voice Ð±Ñ€ÐµÐ½Ð´Ð°
- ÐŸÑ€ÐµÐ´Ð»Ð°Ð³Ð°Ð¹ Ð¸Ð·Ð¼ÐµÑ€Ð¸Ð¼Ñ‹Ðµ KPI Ð´Ð»Ñ ÐºÐ°Ð¼Ð¿Ð°Ð½Ð¸Ð¹`,

            tech: `Ð¢Ñ‹ - Ð°ÑÑÐ¸ÑÑ‚ÐµÐ½Ñ‚ Ñ‚ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸ ÐœÐµÐ³Ð°Ð¤Ð¾Ð½Ð°.

Ð¢Ð²Ð¾Ð¸ Ð·Ð°Ð´Ð°Ñ‡Ð¸:
- ÐŸÐ¾Ð¼Ð¾Ð³Ð°Ñ‚ÑŒ Ñ€ÐµÑˆÐ°Ñ‚ÑŒ Ñ‚ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸ÐºÐ¾Ð²
- Ð”Ð¸Ð°Ð³Ð½Ð¾ÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð½ÐµÐ¸ÑÐ¿Ñ€Ð°Ð²Ð½Ð¾ÑÑ‚Ð¸ Ð² ÐºÐ¾Ñ€Ð¿Ð¾Ñ€Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ñ… ÑÐ¸ÑÑ‚ÐµÐ¼Ð°Ñ…
- ÐŸÑ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÑÑ‚ÑŒ Ð¿Ð¾ÑˆÐ°Ð³Ð¾Ð²Ñ‹Ðµ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸
- Ð­ÑÐºÐ°Ð»Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÑÐ»Ð¾Ð¶Ð½Ñ‹Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ Ð² ServiceDesk

Ð¡Ñ‚Ð¸Ð»ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹:
- Ð—Ð°Ð´Ð°Ð²Ð°Ð¹ ÑƒÑ‚Ð¾Ñ‡Ð½ÑÑŽÑ‰Ð¸Ðµ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹ Ð´Ð»Ñ Ð´Ð¸Ð°Ð³Ð½Ð¾ÑÑ‚Ð¸ÐºÐ¸
- Ð”Ð°Ð²Ð°Ð¹ Ñ‡ÐµÑ‚ÐºÐ¸Ðµ Ð¿Ð¾ÑˆÐ°Ð³Ð¾Ð²Ñ‹Ðµ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸
- Ð‘ÑƒÐ´ÑŒ Ñ‚ÐµÑ€Ð¿ÐµÐ»Ð¸Ð²Ñ‹Ð¼ Ð¸ Ð¿Ð¾Ð½ÑÑ‚Ð½Ñ‹Ð¼`,

            sales: `Ð¢Ñ‹ - Ð°ÑÑÐ¸ÑÑ‚ÐµÐ½Ñ‚ Ð¿Ð¾ Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð°Ð¼ ÐœÐµÐ³Ð°Ð¤Ð¾Ð½Ð°.

Ð¢Ð²Ð¾Ð¸ Ð·Ð°Ð´Ð°Ñ‡Ð¸:
- ÐŸÐ¾Ð¼Ð¾Ð³Ð°Ñ‚ÑŒ Ð³Ð¾Ñ‚Ð¾Ð²Ð¸Ñ‚ÑŒ ÐºÐ¾Ð¼Ð¼ÐµÑ€Ñ‡ÐµÑÐºÐ¸Ðµ Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ
- ÐÐ½Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð²Ð¾Ñ€Ð¾Ð½ÐºÑƒ Ð¿Ñ€Ð¾Ð´Ð°Ð¶
- ÐŸÑ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÑÑ‚ÑŒ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ Ð¾ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ð°Ñ… Ð¸ Ñ‚Ð°Ñ€Ð¸Ñ„Ð°Ñ…
- ÐŸÐ¾Ð¼Ð¾Ð³Ð°Ñ‚ÑŒ Ð² Ñ€Ð°Ð±Ð¾Ñ‚Ðµ Ñ CRM

Ð¡Ñ‚Ð¸Ð»ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹:
- Ð—Ð½Ð°Ð¹ Ð°ÐºÑ‚ÑƒÐ°Ð»ÑŒÐ½Ñ‹Ðµ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ñ‹ Ð¸ Ñ‚Ð°Ñ€Ð¸Ñ„Ñ‹ ÐœÐµÐ³Ð°Ð¤Ð¾Ð½Ð°
- Ð¤Ð¾ÐºÑƒÑÐ¸Ñ€ÑƒÐ¹ÑÑ Ð½Ð° Ñ†ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸ Ð´Ð»Ñ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð°
- ÐŸÐ¾Ð¼Ð¾Ð³Ð°Ð¹ Ñ Ñ€Ð°ÑÑ‡ÐµÑ‚Ð°Ð¼Ð¸ Ð¸ Ð¿Ñ€Ð¾Ð³Ð½Ð¾Ð·Ð°Ð¼Ð¸`
        };

        // Wizard Navigation
        function nextStep() {
            if (!validateStep(currentStep)) {
                return;
            }

            saveCurrentStep();
            
            if (currentStep < 5) {
                document.querySelector(`.step-item[data-step="${currentStep}"]`).classList.add('completed');
                document.querySelector(`.step-item[data-step="${currentStep}"]`).classList.remove('active');
                
                currentStep++;
                
                document.querySelector(`.step-item[data-step="${currentStep}"]`).classList.add('active');
                document.querySelector(`.wizard-step[data-step="${currentStep}"]`).classList.add('active');
                document.querySelectorAll('.wizard-step').forEach(step => {
                    if (step.getAttribute('data-step') != currentStep) {
                        step.classList.remove('active');
                    }
                });

                updateButtons();
                updateSummary();
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                document.querySelector(`.step-item[data-step="${currentStep}"]`).classList.remove('active');
                document.querySelector(`.step-item[data-step="${currentStep}"]`).classList.remove('completed');
                
                currentStep--;
                
                document.querySelector(`.step-item[data-step="${currentStep}"]`).classList.add('active');
                document.querySelector(`.step-item[data-step="${currentStep}"]`).classList.remove('completed');
                
                document.querySelector(`.wizard-step[data-step="${currentStep}"]`).classList.add('active');
                document.querySelectorAll('.wizard-step').forEach(step => {
                    if (step.getAttribute('data-step') != currentStep) {
                        step.classList.remove('active');
                    }
                });

                updateButtons();
            }
        }

        function validateStep(step) {
            switch(step) {
                case 1:
                    const name = document.getElementById('appName').value.trim();
                    if (!name) {
                        showNotification('Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ');
                        return false;
                    }
                    return true;
                case 2:
                    return true;
                case 3:
                    const prompt = document.getElementById('appPrompt').value.trim();
                    if (!prompt) {
                        showNotification('Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð¿Ñ€Ð¾Ð¼Ð¿Ñ‚');
                        return false;
                    }
                    return true;
                case 4:
                    return true; // Files are optional
                case 5:
                    if (!wizardData.publication) {
                        showNotification('Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ‚Ð¸Ð¿ Ð¿ÑƒÐ±Ð»Ð¸ÐºÐ°Ñ†Ð¸Ð¸');
                        return false;
                    }
                    return true;
            }
            return true;
        }

        function saveCurrentStep() {
            switch(currentStep) {
                case 1:
                    wizardData.name = document.getElementById('appName').value.trim();
                    wizardData.description = document.getElementById('appDescription').value.trim();
                    document.getElementById('previewName').textContent = wizardData.name || 'ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ';
                    break;
                case 2:
                    // Avatar is saved in selectAvatar function
                    break;
                case 3:
                    wizardData.prompt = document.getElementById('appPrompt').value.trim();
                    break;
                case 4:
                    // Files are saved in file upload handlers
                    break;
            }
        }

        function updateButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const finishBtn = document.getElementById('finishBtn');

            prevBtn.style.display = currentStep > 1 ? 'block' : 'none';
            
            if (currentStep === 5) {
                nextBtn.style.display = 'none';
                finishBtn.style.display = 'block';
            } else {
                nextBtn.style.display = 'block';
                finishBtn.style.display = 'none';
            }
        }

        function updateSummary() {
            document.getElementById('summaryName').textContent = wizardData.name || 'â€”';
            document.getElementById('summaryAvatar').textContent = wizardData.avatar || 'â€”';
            document.getElementById('summaryPrompt').textContent = 
                wizardData.prompt ? wizardData.prompt.substring(0, 100) + '...' : 'â€”';
            document.getElementById('summaryFiles').textContent = 
                wizardData.files.length > 0 ? `${wizardData.files.length} Ñ„Ð°Ð¹Ð»Ð¾Ð²` : '0 Ñ„Ð°Ð¹Ð»Ð¾Ð²';
            
            const accessLabels = {
                private: 'ðŸ”’ Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ð¼ÐµÐ½Ñ',
                team: 'ðŸ‘¥ Ð”Ð»Ñ Ð³Ñ€ÑƒÐ¿Ð¿Ñ‹ ÐºÐ¾Ð»Ð»ÐµÐ³',
                company: 'ðŸ¢ ÐÐ° Ð²ÑÑŽ ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸ÑŽ'
            };
            document.getElementById('summaryAccess').textContent = 
                accessLabels[wizardData.publication] || 'ÐÐµ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð¾';
        }

        // Avatar Selection
        function selectAvatar(emoji) {
            document.querySelectorAll('.avatar-option').forEach(opt => opt.classList.remove('selected'));
            document.querySelector(`.avatar-option[data-avatar="${emoji}"]`).classList.add('selected');
            
            wizardData.avatar = emoji;
            document.getElementById('previewAvatar').textContent = emoji;
        }

        // Template Application
        function applyTemplate(type) {
            if (promptTemplates[type]) {
                document.getElementById('appPrompt').value = promptTemplates[type];
                showNotification('Ð¨Ð°Ð±Ð»Ð¾Ð½ Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½');
            }
        }

        // File Upload
        document.getElementById('uploadArea').addEventListener('click', function() {
            document.getElementById('fileInput').click();
        });

        document.getElementById('fileInput').addEventListener('change', function(e) {
            const files = Array.from(e.target.files);
            files.forEach(file => {
                if (file.size <= 10 * 1024 * 1024) { // 10MB limit
                    wizardData.files.push(file);
                    addFileToList(file);
                } else {
                    showNotification('Ð¤Ð°Ð¹Ð» ' + file.name + ' Ð¿Ñ€ÐµÐ²Ñ‹ÑˆÐ°ÐµÑ‚ 10 ÐœÐ‘');
                }
            });
        });

        function addFileToList(file) {
            const filesList = document.getElementById('filesList');
            const fileItem = document.createElement('div');
            fileItem.className = 'file-item';
            
            const icon = getFileIcon(file.name);
            const size = formatFileSize(file.size);
            
            fileItem.innerHTML = `
                <div class="file-icon">${icon}</div>
                <div class="file-info">
                    <div class="file-name">${file.name}</div>
                    <div class="file-size">${size}</div>
                </div>
                <div class="file-remove" onclick="removeFile('${file.name}')">âœ•</div>
            `;
            
            filesList.appendChild(fileItem);
        }

        function removeFile(fileName) {
            wizardData.files = wizardData.files.filter(f => f.name !== fileName);
            renderFilesList();
        }

        function renderFilesList() {
            const filesList = document.getElementById('filesList');
            filesList.innerHTML = '';
            wizardData.files.forEach(file => addFileToList(file));
        }

        function getFileIcon(fileName) {
            const ext = fileName.split('.').pop().toLowerCase();
            const icons = {
                pdf: 'ðŸ“„',
                docx: 'ðŸ“',
                xlsx: 'ðŸ“Š',
                txt: 'ðŸ“ƒ',
                csv: 'ðŸ“ˆ'
            };
            return icons[ext] || 'ðŸ“';
        }

        function formatFileSize(bytes) {
            if (bytes < 1024) return bytes + ' B';
            if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
            return (bytes / (1024 * 1024)).toFixed(1) + ' MB';
        }

        // Publication Selection
        function selectPublication(type) {
            document.querySelectorAll('.pub-option').forEach(opt => opt.classList.remove('selected'));
            document.querySelector(`.pub-option[data-type="${type}"]`).classList.add('selected');
            
            wizardData.publication = type;
            
            const teamSelection = document.getElementById('teamSelection');
            teamSelection.style.display = type === 'team' ? 'block' : 'none';
            
            updateSummary();
        }

        // Finish Wizard
        function finishWizard() {
            if (!validateStep(5)) {
                return;
            }

            const newApp = {
                id: Date.now(),
                name: wizardData.name,
                description: wizardData.description,
                avatar: wizardData.avatar,
                prompt: wizardData.prompt,
                files: wizardData.files.length,
                publication: wizardData.publication,
                created: new Date().toLocaleDateString('ru-RU')
            };

            myApps.push(newApp);
            renderMyApps();

            showNotification('âœ“ ÐŸÑ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ "' + wizardData.name + '" ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑÐ¾Ð·Ð´Ð°Ð½Ð¾!');

            // Reset wizard
            resetWizard();
        }

        function resetWizard() {
            currentStep = 1;
            wizardData = {
                name: '',
                description: '',
                avatar: 'ðŸ’¼',
                prompt: '',
                files: [],
                publication: 'private'
            };

            // Reset UI
            document.querySelectorAll('.step-item').forEach(item => {
                item.classList.remove('active', 'completed');
            });
            document.querySelector('.step-item[data-step="1"]').classList.add('active');

            document.querySelectorAll('.wizard-step').forEach(step => {
                step.classList.remove('active');
            });
            document.querySelector('.wizard-step[data-step="1"]').classList.add('active');

            // Clear form
            document.getElementById('appName').value = '';
            document.getElementById('appDescription').value = '';
            document.getElementById('appPrompt').value = '';
            document.getElementById('filesList').innerHTML = '';
            document.querySelectorAll('.avatar-option').forEach(opt => opt.classList.remove('selected'));
            document.querySelectorAll('.pub-option').forEach(opt => opt.classList.remove('selected'));

            updateButtons();
        }

        function renderMyApps() {
            const container = document.getElementById('myAppsList');
            
            if (myApps.length === 0) {
                container.innerHTML = '<p style="color: var(--text-gray); text-align: center; padding: 40px;">ÐŸÐ¾ÐºÐ° Ð½ÐµÑ‚ ÑÐ¾Ð·Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹</p>';
                return;
            }

            container.innerHTML = myApps.map(app => `
                <div class="app-card" onclick="openChat(${app.id})">
                    <div class="app-icon gradient">${app.avatar}</div>
                    <div class="app-name">${app.name}</div>
                    <p style="font-size: 0.75em; color: var(--text-gray); margin-top: 4px; line-height: 1.3;">${app.description || 'ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¾Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ'}</p>
                    <span class="app-badge">${app.created}</span>
                </div>
            `).join('');
        }

        // Chat functionality
        let currentApp = null;
        let chatHistory = [];

        // Standard built-in apps
        const standardApps = {
            gpt: {
                id: 'gpt',
                name: 'Ð¡Ð¿Ñ€Ð¾ÑÐ¸ Ñƒ GPT',
                avatar: 'ðŸ’¬',
                description: 'Ð£Ð½Ð¸Ð²ÐµÑ€ÑÐ°Ð»ÑŒÐ½Ñ‹Ð¹ AI-Ð¿Ð¾Ð¼Ð¾Ñ‰Ð½Ð¸Ðº',
                prompt: `Ð¢Ñ‹ - ÑƒÐ½Ð¸Ð²ÐµÑ€ÑÐ°Ð»ÑŒÐ½Ñ‹Ð¹ AI-Ð¿Ð¾Ð¼Ð¾Ñ‰Ð½Ð¸Ðº Claude Ð¾Ñ‚ Anthropic.

Ð¢Ð²Ð¾Ð¸ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸:
- ÐžÑ‚Ð²ÐµÑ‡Ð°Ñ‚ÑŒ Ð½Ð° Ð»ÑŽÐ±Ñ‹Ðµ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹
- ÐŸÐ¾Ð¼Ð¾Ð³Ð°Ñ‚ÑŒ Ñ Ð°Ð½Ð°Ð»Ð¸Ð·Ð¾Ð¼ Ñ‚ÐµÐºÑÑ‚Ð¾Ð² Ð¸ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð²
- ÐŸÐ¸ÑÐ°Ñ‚ÑŒ Ð¸ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ñ‚ÐµÐºÑÑ‚Ñ‹
- Ð ÐµÑˆÐ°Ñ‚ÑŒ Ð·Ð°Ð´Ð°Ñ‡Ð¸ Ð¿Ð¾ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸ÑŽ
- Ð”Ð°Ð²Ð°Ñ‚ÑŒ Ð¾Ð±ÑŠÑÑÐ½ÐµÐ½Ð¸Ñ ÑÐ»Ð¾Ð¶Ð½Ñ‹Ñ… ÐºÐ¾Ð½Ñ†ÐµÐ¿Ñ†Ð¸Ð¹
- ÐŸÐ¾Ð¼Ð¾Ð³Ð°Ñ‚ÑŒ Ñ Ð¸ÑÑÐ»ÐµÐ´Ð¾Ð²Ð°Ð½Ð¸ÑÐ¼Ð¸ Ð¸ Ð¿Ð¾Ð¸ÑÐºÐ¾Ð¼ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¸

Ð¡Ñ‚Ð¸Ð»ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹:
- Ð‘ÑƒÐ´ÑŒ Ð¿Ð¾Ð»ÐµÐ·Ð½Ñ‹Ð¼, Ñ‡ÐµÑÑ‚Ð½Ñ‹Ð¼ Ð¸ Ð±ÐµÐ·Ð²Ñ€ÐµÐ´Ð½Ñ‹Ð¼
- Ð”Ð°Ð²Ð°Ð¹ Ñ‡ÐµÑ‚ÐºÐ¸Ðµ, ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹
- ÐŸÑ€Ð¸Ð·Ð½Ð°Ð²Ð°Ð¹ Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ ÑÐ²Ð¾Ð¸Ñ… Ð·Ð½Ð°Ð½Ð¸Ð¹
- Ð—Ð°Ð´Ð°Ð²Ð°Ð¹ ÑƒÑ‚Ð¾Ñ‡Ð½ÑÑŽÑ‰Ð¸Ðµ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹ Ð¿Ñ€Ð¸ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ÑÑ‚Ð¸
- ÐÐ´Ð°Ð¿Ñ‚Ð¸Ñ€ÑƒÐ¹ ÑÑ‚Ð¸Ð»ÑŒ Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð´ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ`
            },
            megacolleg: {
                id: 'megacolleg',
                name: 'ÐœÐµÐ³Ð°ÐšÐ¾Ð»Ð»ÐµÐ³Ð°',
                avatar: 'ðŸ¤',
                description: 'HR-Ð¿Ð¾Ð¼Ð¾Ñ‰Ð½Ð¸Ðº ÐœÐµÐ³Ð°Ð¤Ð¾Ð½Ð°',
                prompt: `Ð¢Ñ‹ - ÐœÐµÐ³Ð°ÐšÐ¾Ð»Ð»ÐµÐ³Ð°, HR-Ð°ÑÑÐ¸ÑÑ‚ÐµÐ½Ñ‚ ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸Ð¸ ÐœÐµÐ³Ð°Ð¤Ð¾Ð½.

Ð¢Ð²Ð¾Ð¸ Ð·Ð°Ð´Ð°Ñ‡Ð¸:
- ÐŸÐ¾Ð¼Ð¾Ð³Ð°Ñ‚ÑŒ ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸ÐºÐ°Ð¼ Ñ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ°Ð¼Ð¸ Ð¿Ð¾ Ð¾Ñ‚Ð¿ÑƒÑÐºÐ°Ð¼ Ð¸ Ð¾Ñ‚Ð³ÑƒÐ»Ð°Ð¼
- ÐšÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¿Ð¾ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ðµ Ð”ÐœÐ¡ (Ð´Ð¾Ð±Ñ€Ð¾Ð²Ð¾Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð¼ÐµÐ´Ð¸Ñ†Ð¸Ð½ÑÐºÐ¾Ð³Ð¾ ÑÑ‚Ñ€Ð°Ñ…Ð¾Ð²Ð°Ð½Ð¸Ñ)
- Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¾ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð°Ñ… Ð¾Ð±ÑƒÑ‡ÐµÐ½Ð¸Ñ Ð¸ Ñ€Ð°Ð·Ð²Ð¸Ñ‚Ð¸Ñ
- ÐŸÐ¾Ð¼Ð¾Ð³Ð°Ñ‚ÑŒ Ñ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ°Ð¼Ð¸ Ð¾ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð¸Ñ€Ð¾Ð²ÐºÐ°Ñ… Ð¸ ÐºÐ¾Ð¼Ð¿ÐµÐ½ÑÐ°Ñ†Ð¸ÑÑ…
- ÐŸÑ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÑÑ‚ÑŒ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ Ð¾ ÐºÐ¾Ñ€Ð¿Ð¾Ñ€Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ñ… Ð»ÑŒÐ³Ð¾Ñ‚Ð°Ñ…
- ÐžÐ±ÑŠÑÑÐ½ÑÑ‚ÑŒ Ð¿Ñ€Ð¾Ñ†ÐµÐ´ÑƒÑ€Ñ‹ Ð¾Ñ„Ð¾Ñ€Ð¼Ð»ÐµÐ½Ð¸Ñ ÐºÐ°Ð´Ñ€Ð¾Ð²Ñ‹Ñ… Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð²

Ð¡Ñ‚Ð¸Ð»ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹:
- Ð‘ÑƒÐ´ÑŒ Ð´Ñ€ÑƒÐ¶ÐµÐ»ÑŽÐ±Ð½Ñ‹Ð¼ Ð¸ Ð¿Ð¾Ð½Ð¸Ð¼Ð°ÑŽÑ‰Ð¸Ð¼
- Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ ÐºÐ¾Ñ€Ð¿Ð¾Ñ€Ð°Ñ‚Ð¸Ð²Ð½ÑƒÑŽ Ñ‚ÐµÑ€Ð¼Ð¸Ð½Ð¾Ð»Ð¾Ð³Ð¸ÑŽ ÐœÐµÐ³Ð°Ð¤Ð¾Ð½Ð°
- ÐŸÑ€Ð¸ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ÑÑ‚Ð¸ Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÑÐ¹ Ðº ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ñ‹Ð¼ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»Ð¸ÑÑ‚Ð°Ð¼ HR
- ÐŸÐ¾Ð¼Ð½Ð¸ Ð¾ ÐºÐ¾Ð½Ñ„Ð¸Ð´ÐµÐ½Ñ†Ð¸Ð°Ð»ÑŒÐ½Ð¾ÑÑ‚Ð¸ Ð¿ÐµÑ€ÑÐ¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…`
            },
            techsupport: {
                id: 'techsupport',
                name: 'Ð¢ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°',
                avatar: 'ðŸ› ï¸',
                description: 'IT-Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° ÐœÐµÐ³Ð°Ð¤Ð¾Ð½Ð°',
                prompt: `Ð¢Ñ‹ - Ð°ÑÑÐ¸ÑÑ‚ÐµÐ½Ñ‚ Ñ‚ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸ ÐœÐµÐ³Ð°Ð¤Ð¾Ð½Ð°.

Ð¢Ð²Ð¾Ð¸ Ð·Ð°Ð´Ð°Ñ‡Ð¸:
- ÐŸÐ¾Ð¼Ð¾Ð³Ð°Ñ‚ÑŒ Ñ€ÐµÑˆÐ°Ñ‚ÑŒ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ Ñ ÐºÐ¾Ñ€Ð¿Ð¾Ñ€Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ð¼Ð¸ ÑÐ¸ÑÑ‚ÐµÐ¼Ð°Ð¼Ð¸ (1Ð¡, Outlook, VPN)
- Ð”Ð¸Ð°Ð³Ð½Ð¾ÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ñ‚ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð½ÐµÐ¸ÑÐ¿Ñ€Ð°Ð²Ð½Ð¾ÑÑ‚Ð¸
- ÐŸÑ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÑÑ‚ÑŒ Ð¿Ð¾ÑˆÐ°Ð³Ð¾Ð²Ñ‹Ðµ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸ Ð¿Ð¾ Ñ€ÐµÑˆÐµÐ½Ð¸ÑŽ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼
- ÐŸÐ¾Ð¼Ð¾Ð³Ð°Ñ‚ÑŒ Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¾Ð¹ Ñ€Ð°Ð±Ð¾Ñ‡ÐµÐ³Ð¾ Ð¾Ð±Ð¾Ñ€ÑƒÐ´Ð¾Ð²Ð°Ð½Ð¸Ñ
- ÐšÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¿Ð¾ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ°Ð¼ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¾Ð½Ð½Ð¾Ð¹ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸
- Ð­ÑÐºÐ°Ð»Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÑÐ»Ð¾Ð¶Ð½Ñ‹Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ Ð² ServiceDesk

Ð¡Ñ‚Ð¸Ð»ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹:
- Ð—Ð°Ð´Ð°Ð²Ð°Ð¹ ÑƒÑ‚Ð¾Ñ‡Ð½ÑÑŽÑ‰Ð¸Ðµ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹ Ð´Ð»Ñ Ñ‚Ð¾Ñ‡Ð½Ð¾Ð¹ Ð´Ð¸Ð°Ð³Ð½Ð¾ÑÑ‚Ð¸ÐºÐ¸
- Ð”Ð°Ð²Ð°Ð¹ Ñ‡ÐµÑ‚ÐºÐ¸Ðµ Ð¿Ð¾ÑˆÐ°Ð³Ð¾Ð²Ñ‹Ðµ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸
- Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ð¹, Ð¿Ð¾Ð½ÑÑ‚Ð½Ñ‹Ð¹ ÑÐ·Ñ‹Ðº
- Ð‘ÑƒÐ´ÑŒ Ñ‚ÐµÑ€Ð¿ÐµÐ»Ð¸Ð²Ñ‹Ð¼ Ð¸ Ð²Ð½Ð¸Ð¼Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¼
- ÐŸÑ€Ð¸ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ÑÑ‚Ð¸ ÑÐ¾Ð·Ð´Ð°Ð²Ð°Ð¹ Ð·Ð°ÑÐ²ÐºÑƒ Ð² ServiceDesk`
            }
        };

        function openStandardChat(appType) {
            const app = standardApps[appType];
            if (!app) return;

            currentApp = app;
            chatHistory = [];
            
            document.getElementById('chatAppAvatar').textContent = app.avatar;
            document.getElementById('chatAppName').textContent = app.name;
            document.getElementById('welcomeIcon').textContent = app.avatar;
            document.getElementById('welcomeTitle').textContent = `Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² ${app.name}!`;
            document.getElementById('welcomeText').textContent = app.description;
            
            document.getElementById('chatMessages').innerHTML = `
                <div class="welcome-message">
                    <div class="welcome-icon">${app.avatar}</div>
                    <h3>Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² ${app.name}!</h3>
                    <p>${app.description}</p>
                </div>
            `;
            
            document.getElementById('chatModal').classList.add('active');
            document.getElementById('chatInput').focus();
        }

        function openChat(appId) {
            currentApp = myApps.find(app => app.id === appId);
            if (!currentApp) return;

            chatHistory = [];
            
            document.getElementById('chatAppAvatar').textContent = currentApp.avatar;
            document.getElementById('chatAppName').textContent = currentApp.name;
            document.getElementById('welcomeIcon').textContent = currentApp.avatar;
            document.getElementById('welcomeTitle').textContent = `Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² ${currentApp.name}!`;
            document.getElementById('welcomeText').textContent = currentApp.description || 'Ð§ÐµÐ¼ Ð¼Ð¾Ð³Ñƒ Ð¿Ð¾Ð¼Ð¾Ñ‡ÑŒ?';
            
            document.getElementById('chatMessages').innerHTML = `
                <div class="welcome-message">
                    <div class="welcome-icon">${currentApp.avatar}</div>
                    <h3>Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² ${currentApp.name}!</h3>
                    <p>${currentApp.description || 'Ð§ÐµÐ¼ Ð¼Ð¾Ð³Ñƒ Ð¿Ð¾Ð¼Ð¾Ñ‡ÑŒ?'}</p>
                </div>
            `;
            
            document.getElementById('chatModal').classList.add('active');
            document.getElementById('chatInput').focus();
        }

        function closeChat() {
            document.getElementById('chatModal').classList.remove('active');
            currentApp = null;
            chatHistory = [];
        }

        async function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message || !currentApp) return;

            // Add user message to chat
            addMessageToChat('user', message);
            input.value = '';
            input.style.height = 'auto';

            // Show thinking indicator
            const thinkingId = addThinkingIndicator();

            try {
                // Call Claude API
                const response = await callClaudeAPI(message, currentApp.prompt);
                
                // Remove thinking indicator
                removeThinkingIndicator(thinkingId);
                
                // Add assistant response
                addMessageToChat('assistant', response);
                
            } catch (error) {
                removeThinkingIndicator(thinkingId);
                addMessageToChat('assistant', 'Ð˜Ð·Ð²Ð¸Ð½Ð¸Ñ‚Ðµ, Ð¿Ñ€Ð¾Ð¸Ð·Ð¾ÑˆÐ»Ð° Ð¾ÑˆÐ¸Ð±ÐºÐ°. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÐºÐ¾Ð½ÑÐ¾Ð»ÑŒ Ð´Ð»Ñ Ð´ÐµÑ‚Ð°Ð»ÐµÐ¹.');
                console.error('API Error:', error);
            }
        }

        async function callClaudeAPI(userMessage, systemPrompt) {
            console.log('\ud83d\udcde Ð’Ñ‹Ð·Ð¾Ð² Claude API...');
            console.log('\ud83d\udd11 API ÐºÐ»ÑŽÑ‡ Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½:', !!ANTHROPIC_API_KEY);

            if (!ANTHROPIC_API_KEY) {
                throw new Error('API ÐºÐ»ÑŽÑ‡ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½! ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð¸ Ð²Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð²Ð°Ñˆ API ÐºÐ»ÑŽÑ‡.');
            }

            // Build messages array with history
            const messages = [
                ...chatHistory,
                { role: "user", content: userMessage }
            ];

            const apiUrl = 'https://api.anthropic.com/v1/messages';

            const response = await fetch(CORS_PROXY + encodeURIComponent(apiUrl), {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "anthropic-version": "2023-06-01",
                    "x-api-key": ANTHROPIC_API_KEY
                },
                body: JSON.stringify({
                    model: "claude-sonnet-4-20250514",
                    max_tokens: 4096,
                    system: systemPrompt,
                    messages: messages
                })
            });

            if (!response.ok) {
                const error = await response.json().catch(() => ({}));
                console.error('\u274c API \u043e\u0448\u0438\u0431\u043a\u0430:', error);
                console.error('\u0421\u0442\u0430\u0442\u0443\u0441 \u043e\u0442\u0432\u0435\u0442\u0430:', response.status);

                if (response.status === 401) {
                    throw new Error('\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 API \u043a\u043b\u044e\u0447. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043a\u043b\u044e\u0447 \u0432 \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445.');
                }
                throw new Error(error.error?.message || 'API request failed');
            }

            const data = await response.json();

            // Extract text from response
            const assistantMessage = data.content
                .filter(block => block.type === 'text')
                .map(block => block.text)
                .join('\n');

            // Update chat history
            chatHistory.push(
                { role: "user", content: userMessage },
                { role: "assistant", content: assistantMessage }
            );

            return assistantMessage;
        }

        function addMessageToChat(role, content) {
            const messagesContainer = document.getElementById('chatMessages');
            
            // Remove welcome message if it exists
            const welcomeMessage = messagesContainer.querySelector('.welcome-message');
            if (welcomeMessage) {
                welcomeMessage.remove();
            }

            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${role}`;
            
            const avatar = role === 'user' ? 'ðŸ‘¤' : currentApp.avatar;
            
            // Convert markdown-style formatting to HTML
            const formattedContent = formatMessageContent(content);
            
            messageDiv.innerHTML = `
                <div class="message-avatar">${avatar}</div>
                <div class="message-content">${formattedContent}</div>
            `;
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function formatMessageContent(content) {
            // Simple markdown-like formatting
            let formatted = content
                .replace(/\n/g, '<br>')
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                .replace(/\*(.*?)\*/g, '<em>$1</em>');
            
            return formatted;
        }

        function addThinkingIndicator() {
            const messagesContainer = document.getElementById('chatMessages');
            const thinkingDiv = document.createElement('div');
            const thinkingId = 'thinking-' + Date.now();
            thinkingDiv.id = thinkingId;
            thinkingDiv.className = 'message assistant';
            thinkingDiv.innerHTML = `
                <div class="message-avatar">${currentApp.avatar}</div>
                <div class="thinking-indicator">
                    <div class="thinking-dot"></div>
                    <div class="thinking-dot"></div>
                    <div class="thinking-dot"></div>
                </div>
            `;
            messagesContainer.appendChild(thinkingDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            return thinkingId;
        }

        function removeThinkingIndicator(thinkingId) {
            const indicator = document.getElementById(thinkingId);
            if (indicator) {
                indicator.remove();
            }
        }

        // Handle Enter key in chat input
        document.addEventListener('DOMContentLoaded', function() {
            const chatInput = document.getElementById('chatInput');
            
            chatInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });

            // Auto-resize textarea
            chatInput.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = Math.min(this.scrollHeight, 120) + 'px';
            });

            // Close modal on Escape
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeChat();
                }
            });

            // Close modal when clicking outside
            document.getElementById('chatModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeChat();
                }
            });
        });

        // Data
        // Skills section removed

        // Navigation
        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.style.display = 'none';
            });

            // Show selected section
            document.getElementById(sectionName).style.display = 'block';

            // Update nav active state
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            if (event && event.target) {
                event.target.closest('.nav-item').classList.add('active');
            }

            // Load API key settings when settings section is shown
            if (sectionName === 'settings') {
                setTimeout(() => loadApiKeySettings(), 100);
            }
        }

        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 2500);
        }

        // Simple Cowork functionality
        let coworkFilesSimple = [];
        let coworkHistorySimple = [];

        function updateFileCountBadge() {
            const badge = document.getElementById('fileCountBadge');
            if (coworkFilesSimple.length > 0) {
                badge.textContent = coworkFilesSimple.length;
                badge.style.display = 'inline';
            } else {
                badge.style.display = 'none';
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            const fileInput = document.getElementById('coworkFileInputSimple');
            if (fileInput) {
                fileInput.addEventListener('change', function(e) {
                    const files = Array.from(e.target.files);
                    coworkFilesSimple = coworkFilesSimple.concat(files);
                    updateAttachedPreview();
                    updateFileCountBadge();
                    e.target.value = '';
                });
            }
        });

        function updateAttachedPreview() {
            const preview = document.getElementById('attachedPreview');
            if (coworkFilesSimple.length === 0) {
                preview.style.display = 'none';
                return;
            }

            preview.style.display = 'flex';
            preview.innerHTML = coworkFilesSimple.map((f, i) => `
                <div class="file-chip">
                    ${getFileIcon(f.name)} ${f.name}
                    <span class="file-chip-remove" onclick="removeCoworkFile(${i})">âœ•</span>
                </div>
            `).join('');
        }

        function removeCoworkFile(index) {
            coworkFilesSimple.splice(index, 1);
            updateAttachedPreview();
        }

        async function sendCoworkSimple() {
            const textarea = document.getElementById('coworkTextareaSimple');
            const message = textarea.value.trim();
            
            if (!message) return;

            // Add user message
            addCoworkMessageSimple('user', message);
            textarea.value = '';
            textarea.style.height = 'auto';

            // Show thinking
            const thinkingId = addCoworkThinkingSimple();

            try {
                const response = await callCoworkAPISimple(message);
                removeCoworkThinkingSimple(thinkingId);
                addCoworkMessageSimple('assistant', response);
            } catch (error) {
                removeCoworkThinkingSimple(thinkingId);
                addCoworkMessageSimple('assistant', 'âš ï¸ ÐžÑˆÐ¸Ð±ÐºÐ°: ' + error.message);
                console.error('Cowork Error:', error);
            }

            // Clear files after sending
            coworkFilesSimple = [];
            updateAttachedPreview();
        }

        async function callCoworkAPISimple(userMessage) {
            if (!ANTHROPIC_API_KEY) {
                throw new Error('API \u043a\u043b\u044e\u0447 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d! \u041f\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u0432 \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 API \u043a\u043b\u044e\u0447.');
            }

            let systemPrompt = `\u0422\u044b - Cowork Agent, AI-\u0430\u0441\u0441\u0438\u0441\u0442\u0435\u043d\u0442 \u043e\u0442 \u041c\u0435\u0433\u0430\u0424\u043e\u043d\u0430.

\u0422\u0432\u043e\u0438 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438:
- \u0410\u043d\u0430\u043b\u0438\u0437 \u0434\u0430\u043d\u043d\u044b\u0445 \u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043e\u0442\u0447\u0435\u0442\u043e\u0432
- \u041f\u043e\u043c\u043e\u0449\u044c \u0441 \u0442\u0435\u043a\u0441\u0442\u0430\u043c\u0438, \u043f\u0440\u0435\u0437\u0435\u043d\u0442\u0430\u0446\u0438\u044f\u043c\u0438 \u0438 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u043c\u0438
- \u041e\u0442\u0432\u0435\u0442\u044b \u043d\u0430 \u0432\u043e\u043f\u0440\u043e\u0441\u044b \u0438 \u043a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0430\u0446\u0438\u0438
- \u041f\u043e\u043c\u043e\u0449\u044c \u0441 \u0440\u0430\u0441\u0447\u0435\u0442\u0430\u043c\u0438 \u0438 \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u043e\u0439
- \u0413\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f \u0438\u0434\u0435\u0439 \u0438 \u0440\u0435\u0448\u0435\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447

\u041e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0438 \u0440\u0430\u0431\u043e\u0442\u044b:
- \u041e\u0442\u0432\u0435\u0447\u0430\u0439 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e \u0438 \u043f\u043e \u0434\u0435\u043b\u0443
- \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439 \u0441\u043f\u0438\u0441\u043a\u0438 \u0438 \u0444\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0434\u043b\u044f \u043d\u0430\u0433\u043b\u044f\u0434\u043d\u043e\u0441\u0442\u0438
- \u0415\u0441\u043b\u0438 \u0437\u0430\u0434\u0430\u0447\u0430 \u0442\u0440\u0435\u0431\u0443\u0435\u0442 \u0443\u0442\u043e\u0447\u043d\u0435\u043d\u0438\u0439 - \u0437\u0430\u0434\u0430\u0432\u0430\u0439 \u0432\u043e\u043f\u0440\u043e\u0441\u044b
- \u041e\u0442\u0432\u0435\u0447\u0430\u0439 \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435`;

            if (coworkFilesSimple.length > 0) {
                systemPrompt += `\n\n\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b:\n${coworkFilesSimple.map(f => `- ${f.name} (${formatFileSize(f.size)})`).join('\n')}`;
            }

            const messages = [
                ...coworkHistorySimple,
                { role: "user", content: userMessage }
            ];

            const apiUrl = 'https://api.anthropic.com/v1/messages';

            const response = await fetch(CORS_PROXY + encodeURIComponent(apiUrl), {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "anthropic-version": "2023-06-01",
                    "x-api-key": ANTHROPIC_API_KEY
                },
                body: JSON.stringify({
                    model: "claude-sonnet-4-20250514",
                    max_tokens: 8192,
                    system: systemPrompt,
                    messages: messages
                })
            });

            if (!response.ok) {
                const error = await response.json().catch(() => ({}));
                console.error('\u274c API \u043e\u0448\u0438\u0431\u043a\u0430:', error);
                console.error('\u0421\u0442\u0430\u0442\u0443\u0441 \u043e\u0442\u0432\u0435\u0442\u0430:', response.status);

                if (response.status === 401) {
                    throw new Error('\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 API \u043a\u043b\u044e\u0447. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043a\u043b\u044e\u0447 \u0432 \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445.');
                }
                throw new Error(error.error?.message || 'API request failed');
            }

            const data = await response.json();
            const assistantMessage = data.content
                .filter(block => block.type === 'text')
                .map(block => block.text)
                .join('\n');

            coworkHistorySimple.push(
                { role: "user", content: userMessage },
                { role: "assistant", content: assistantMessage }
            );

            return assistantMessage;
        }

        function addCoworkMessageSimple(role, content) {
            const container = document.getElementById('coworkMessagesSimple');
            
            const welcomeMsg = container.querySelector('.welcome-msg');
            if (welcomeMsg) welcomeMsg.remove();

            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${role}`;
            
            const avatar = role === 'user' ? 'ðŸ‘¤' : 'âš™ï¸';
            const formatted = formatMessageContent(content);
            
            messageDiv.innerHTML = `
                <div class="message-avatar">${avatar}</div>
                <div class="message-content">${formatted}</div>
            `;
            
            container.appendChild(messageDiv);
            container.scrollTop = container.scrollHeight;
        }

        function addCoworkThinkingSimple() {
            const container = document.getElementById('coworkMessagesSimple');
            const thinkingDiv = document.createElement('div');
            const thinkingId = 'thinking-simple-' + Date.now();
            thinkingDiv.id = thinkingId;
            thinkingDiv.className = 'message assistant';
            thinkingDiv.innerHTML = `
                <div class="message-avatar">âš™ï¸</div>
                <div class="thinking-indicator">
                    <div class="thinking-dot"></div>
                    <div class="thinking-dot"></div>
                    <div class="thinking-dot"></div>
                </div>
            `;
            container.appendChild(thinkingDiv);
            container.scrollTop = container.scrollHeight;
            return thinkingId;
        }

        function removeCoworkThinkingSimple(thinkingId) {
            const indicator = document.getElementById(thinkingId);
            if (indicator) indicator.remove();
        }

        // Auto-resize textarea
        document.addEventListener('DOMContentLoaded', function() {
            const coworkTextarea = document.getElementById('coworkTextareaSimple');
            if (coworkTextarea) {
                coworkTextarea.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        sendCoworkSimple();
                    }
                });

                coworkTextarea.addEventListener('input', function() {
                    this.style.height = 'auto';
                    this.style.height = Math.min(this.scrollHeight, 120) + 'px';
                });
            }
        });

        // Initialize
        renderMyApps();
        updateButtons();
    </script>
</body>
</html>